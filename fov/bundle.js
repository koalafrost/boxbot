!function(t){var n={};function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:e})},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=136)}([function(t,n,r){var e=r(2),i=r(21),o=r(12),u=r(13),a=r(18),c="prototype",f=function(t,n,r){var s,l,h,d,v=t&f.F,p=t&f.G,y=t&f.S,g=t&f.P,m=t&f.B,b=p?e:y?e[n]||(e[n]={}):(e[n]||{})[c],M=p?i:i[n]||(i[n]={}),w=M[c]||(M[c]={});p&&(r=n);for(s in r)h=((l=!v&&b&&void 0!==b[s])?b:r)[s],d=m&&l?a(h,e):g&&"function"==typeof h?a(Function.call,h):h,b&&u(b,s,h,t&f.U),M[s]!=h&&o(M,s,d),g&&w[s]!=h&&(w[s]=h)};e.core=i,f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,t.exports=f},function(t,n,r){var e=r(4);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,r){var e=r(52)("wks"),i=r(33),o=r(2).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){t.exports=!r(3)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(1),i=r(96),o=r(22),u=Object.defineProperty;n.f=r(6)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(24),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){var e=r(23);t.exports=function(t){return Object(e(t))}},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){var e=r(7),i=r(32);t.exports=r(6)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(2),i=r(12),o=r(11),u=r(33)("src"),a="toString",c=Function[a],f=(""+c).split(a);r(21).inspectSource=function(t){return c.call(t)},(t.exports=function(t,n,r,a){var c="function"==typeof r;c&&(o(r,"name")||i(r,"name",n)),t[n]!==r&&(c&&(o(r,u)||i(r,u,t[n]?""+t[n]:f.join(String(n)))),t===e?t[n]=r:a?t[n]?t[n]=r:i(t,n,r):(delete t[n],i(t,n,r)))})(Function.prototype,a,function(){return"function"==typeof this&&this[u]||c.call(this)})},function(t,n,r){var e=r(0),i=r(3),o=r(23),u=/"/g,a=function(t,n,r,e){var i=String(o(t)),a="<"+n;return""!==r&&(a+=" "+r+'="'+String(e).replace(u,"&quot;")+'"'),a+">"+i+"</"+n+">"};t.exports=function(t,n){var r={};r[t]=n(a),e(e.P+e.F*i(function(){var n=""[t]('"');return n!==n.toLowerCase()||n.split('"').length>3}),"String",r)}},function(t,n,r){var e=r(49),i=r(23);t.exports=function(t){return e(i(t))}},function(t,n,r){var e=r(50),i=r(32),o=r(15),u=r(22),a=r(11),c=r(96),f=Object.getOwnPropertyDescriptor;n.f=r(6)?f:function(t,n){if(t=o(t),n=u(n,!0),c)try{return f(t,n)}catch(t){}if(a(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(11),i=r(9),o=r(68)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var e=r(10);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){"use strict";var e=r(3);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n){var r=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=r)},function(t,n,r){var e=r(4);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n,r){var e=r(0),i=r(21),o=r(3);t.exports=function(t,n){var r=(i.Object||{})[t]||Object[t],u={};u[t]=n(r),e(e.S+e.F*o(function(){r(1)}),"Object",u)}},function(t,n,r){var e=r(18),i=r(49),o=r(9),u=r(8),a=r(85);t.exports=function(t,n){var r=1==t,c=2==t,f=3==t,s=4==t,l=6==t,h=5==t||l,d=n||a;return function(n,a,v){for(var p,y,g=o(n),m=i(g),b=e(a,v,3),M=u(m.length),w=0,x=r?d(n,M):c?d(n,0):void 0;M>w;w++)if((h||w in m)&&(y=b(p=m[w],w,g),t))if(r)x[w]=y;else if(y)switch(t){case 3:return!0;case 5:return p;case 6:return w;case 2:x.push(p)}else if(s)return!1;return l?-1:f||s?s:x}}},function(t,n,r){"use strict";if(r(6)){var e=r(34),i=r(2),o=r(3),u=r(0),a=r(62),c=r(91),f=r(18),s=r(40),l=r(32),h=r(12),d=r(42),v=r(24),p=r(8),y=r(122),g=r(36),m=r(22),b=r(11),M=r(51),w=r(4),x=r(9),S=r(82),_=r(37),E=r(17),A=r(38).f,P=r(84),I=r(33),O=r(5),T=r(26),L=r(53),R=r(60),k=r(87),N=r(46),F=r(57),j=r(39),q=r(86),D=r(112),Y=r(7),C=r(16),B=Y.f,X=C.f,U=i.RangeError,V=i.TypeError,W=i.Uint8Array,z="ArrayBuffer",G="Shared"+z,Z="BYTES_PER_ELEMENT",K="prototype",Q=Array[K],H=c.ArrayBuffer,J=c.DataView,$=T(0),tt=T(2),nt=T(3),rt=T(4),et=T(5),it=T(6),ot=L(!0),ut=L(!1),at=k.values,ct=k.keys,ft=k.entries,st=Q.lastIndexOf,lt=Q.reduce,ht=Q.reduceRight,dt=Q.join,vt=Q.sort,pt=Q.slice,yt=Q.toString,gt=Q.toLocaleString,mt=O("iterator"),bt=O("toStringTag"),Mt=I("typed_constructor"),wt=I("def_constructor"),xt=a.CONSTR,St=a.TYPED,_t=a.VIEW,Et="Wrong length!",At=T(1,function(t,n){return Lt(R(t,t[wt]),n)}),Pt=o(function(){return 1===new W(new Uint16Array([1]).buffer)[0]}),It=!!W&&!!W[K].set&&o(function(){new W(1).set({})}),Ot=function(t,n){var r=v(t);if(r<0||r%n)throw U("Wrong offset!");return r},Tt=function(t){if(w(t)&&St in t)return t;throw V(t+" is not a typed array!")},Lt=function(t,n){if(!(w(t)&&Mt in t))throw V("It is not a typed array constructor!");return new t(n)},Rt=function(t,n){return kt(R(t,t[wt]),n)},kt=function(t,n){for(var r=0,e=n.length,i=Lt(t,e);e>r;)i[r]=n[r++];return i},Nt=function(t,n,r){B(t,n,{get:function(){return this._d[r]}})},Ft=function(t){var n,r,e,i,o,u,a=x(t),c=arguments.length,s=c>1?arguments[1]:void 0,l=void 0!==s,h=P(a);if(void 0!=h&&!S(h)){for(u=h.call(a),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);a=e}for(l&&c>2&&(s=f(s,arguments[2],2)),n=0,r=p(a.length),i=Lt(this,r);r>n;n++)i[n]=l?s(a[n],n):a[n];return i},jt=function(){for(var t=0,n=arguments.length,r=Lt(this,n);n>t;)r[t]=arguments[t++];return r},qt=!!W&&o(function(){gt.call(new W(1))}),Dt=function(){return gt.apply(qt?pt.call(Tt(this)):Tt(this),arguments)},Yt={copyWithin:function(t,n){return D.call(Tt(this),t,n,arguments.length>2?arguments[2]:void 0)},every:function(t){return rt(Tt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return q.apply(Tt(this),arguments)},filter:function(t){return Rt(this,tt(Tt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return et(Tt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(Tt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){$(Tt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ut(Tt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Tt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return dt.apply(Tt(this),arguments)},lastIndexOf:function(t){return st.apply(Tt(this),arguments)},map:function(t){return At(Tt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Tt(this),arguments)},reduceRight:function(t){return ht.apply(Tt(this),arguments)},reverse:function(){for(var t,n=Tt(this).length,r=Math.floor(n/2),e=0;e<r;)t=this[e],this[e++]=this[--n],this[n]=t;return this},some:function(t){return nt(Tt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return vt.call(Tt(this),t)},subarray:function(t,n){var r=Tt(this),e=r.length,i=g(t,e);return new(R(r,r[wt]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,p((void 0===n?e:g(n,e))-i))}},Ct=function(t,n){return Rt(this,pt.call(Tt(this),t,n))},Bt=function(t){Tt(this);var n=Ot(arguments[1],1),r=this.length,e=x(t),i=p(e.length),o=0;if(i+n>r)throw U(Et);for(;o<i;)this[n+o]=e[o++]},Xt={entries:function(){return ft.call(Tt(this))},keys:function(){return ct.call(Tt(this))},values:function(){return at.call(Tt(this))}},Ut=function(t,n){return w(t)&&t[St]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},Vt=function(t,n){return Ut(t,n=m(n,!0))?l(2,t[n]):X(t,n)},Wt=function(t,n,r){return!(Ut(t,n=m(n,!0))&&w(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?B(t,n,r):(t[n]=r.value,t)};xt||(C.f=Vt,Y.f=Wt),u(u.S+u.F*!xt,"Object",{getOwnPropertyDescriptor:Vt,defineProperty:Wt}),o(function(){yt.call({})})&&(yt=gt=function(){return dt.call(this)});var zt=d({},Yt);d(zt,Xt),h(zt,mt,Xt.values),d(zt,{slice:Ct,set:Bt,constructor:function(){},toString:yt,toLocaleString:Dt}),Nt(zt,"buffer","b"),Nt(zt,"byteOffset","o"),Nt(zt,"byteLength","l"),Nt(zt,"length","e"),B(zt,bt,{get:function(){return this[St]}}),t.exports=function(t,n,r,c){var f=t+((c=!!c)?"Clamped":"")+"Array",l="get"+t,d="set"+t,v=i[f],g=v||{},m=v&&E(v),b=!v||!a.ABV,x={},S=v&&v[K],P=function(t,r){B(t,r,{get:function(){return t=r,(e=this._d).v[l](t*n+e.o,Pt);var t,e},set:function(t){return e=r,i=t,o=this._d,c&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),void o.v[d](e*n+o.o,i,Pt);var e,i,o},enumerable:!0})};b?(v=r(function(t,r,e,i){s(t,v,f,"_d");var o,u,a,c,l=0,d=0;if(w(r)){if(!(r instanceof H||(c=M(r))==z||c==G))return St in r?kt(v,r):Ft.call(v,r);o=r,d=Ot(e,n);var g=r.byteLength;if(void 0===i){if(g%n)throw U(Et);if((u=g-d)<0)throw U(Et)}else if((u=p(i)*n)+d>g)throw U(Et);a=u/n}else a=y(r),o=new H(u=a*n);for(h(t,"_d",{b:o,o:d,l:u,e:a,v:new J(o)});l<a;)P(t,l++)}),S=v[K]=_(zt),h(S,"constructor",v)):o(function(){v(1)})&&o(function(){new v(-1)})&&F(function(t){new v,new v(null),new v(1.5),new v(t)},!0)||(v=r(function(t,r,e,i){var o;return s(t,v,f),w(r)?r instanceof H||(o=M(r))==z||o==G?void 0!==i?new g(r,Ot(e,n),i):void 0!==e?new g(r,Ot(e,n)):new g(r):St in r?kt(v,r):Ft.call(v,r):new g(y(r))}),$(m!==Function.prototype?A(g).concat(A(m)):A(g),function(t){t in v||h(v,t,g[t])}),v[K]=S,e||(S.constructor=v));var I=S[mt],O=!!I&&("values"==I.name||void 0==I.name),T=Xt.values;h(v,Mt,!0),h(S,St,f),h(S,_t,!0),h(S,wt,v),(c?new v(1)[bt]==f:bt in S)||B(S,bt,{get:function(){return f}}),x[f]=v,u(u.G+u.W+u.F*(v!=g),x),u(u.S,f,{BYTES_PER_ELEMENT:n}),u(u.S+u.F*o(function(){g.of.call(v,1)}),f,{from:Ft,of:jt}),Z in S||h(S,Z,n),u(u.P,f,Yt),j(f),u(u.P+u.F*It,f,{set:Bt}),u(u.P+u.F*!O,f,Xt),e||S.toString==yt||(S.toString=yt),u(u.P+u.F*o(function(){new v(1).slice()}),f,{slice:Ct}),u(u.P+u.F*(o(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!o(function(){S.toLocaleString.call([1,2])})),f,{toLocaleString:Dt}),N[f]=O?I:T,e||O||h(S,mt,T)}}else t.exports=function(){}},function(t,n,r){var e=r(117),i=r(0),o=r(52)("metadata"),u=o.store||(o.store=new(r(120))),a=function(t,n,r){var i=u.get(t);if(!i){if(!r)return;u.set(t,i=new e)}var o=i.get(n);if(!o){if(!r)return;i.set(n,o=new e)}return o};t.exports={store:u,map:a,has:function(t,n,r){var e=a(n,r,!1);return void 0!==e&&e.has(t)},get:function(t,n,r){var e=a(n,r,!1);return void 0===e?void 0:e.get(t)},set:function(t,n,r,e){a(r,e,!0).set(t,n)},keys:function(t,n){var r=a(t,n,!1),e=[];return r&&r.forEach(function(t,n){e.push(n)}),e},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){i(i.S,"Reflect",t)}}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),r.d(n,"ARRAY_TYPE",function(){return i}),n.setMatrixArrayType=function(t){i=t},n.toRadian=function(t){return t*u},n.equals=function(t,n){return Math.abs(t-n)<=e*Math.max(1,Math.abs(t),Math.abs(n))};const e=1e-6;n.EPSILON=e;let i="undefined"!=typeof Float32Array?Float32Array:Array;const o=Math.random;n.RANDOM=o;const u=Math.PI/180},function(t,n,r){var e=r(33)("meta"),i=r(4),o=r(11),u=r(7).f,a=0,c=Object.isExtensible||function(){return!0},f=!r(3)(function(){return c(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++a,w:{}}})},l=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!c(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!o(t,e)){if(!c(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return f&&l.NEED&&c(t)&&!o(t,e)&&s(t),t}}},function(t,n,r){var e=r(5)("unscopables"),i=Array.prototype;void 0==i[e]&&r(12)(i,e,{}),t.exports=function(t){i[e][t]=!0}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n){t.exports=!1},function(t,n,r){var e=r(98),i=r(69);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(24),i=Math.max,o=Math.min;t.exports=function(t,n){return(t=e(t))<0?i(t+n,0):o(t,n)}},function(t,n,r){var e=r(1),i=r(99),o=r(69),u=r(68)("IE_PROTO"),a=function(){},c="prototype",f=function(){var t,n=r(66)("iframe"),e=o.length;for(n.style.display="none",r(70).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),f=t.F;e--;)delete f[c][o[e]];return f()};t.exports=Object.create||function(t,n){var r;return null!==t?(a[c]=e(t),r=new a,a[c]=null,r[u]=t):r=f(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(98),i=r(69).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n,r){"use strict";var e=r(2),i=r(7),o=r(6),u=r(5)("species");t.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n){t.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,n,r){var e=r(18),i=r(110),o=r(82),u=r(1),a=r(8),c=r(84),f={},s={};(n=t.exports=function(t,n,r,l,h){var d,v,p,y,g=h?function(){return t}:c(t),m=e(r,l,n?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(d=a(t.length);d>b;b++)if((y=n?m(u(v=t[b])[0],v[1]):m(t[b]))===f||y===s)return y}else for(p=g.call(t);!(v=p.next()).done;)if((y=i(p,m,v.value,n))===f||y===s)return y}).BREAK=f,n.RETURN=s},function(t,n,r){var e=r(13);t.exports=function(t,n,r){for(var i in n)e(t,i,n[i],r);return t}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function t(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}}();n.default=o;var i=function(){function t(n,r){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=n||0,this.y=(void 0===r?n:r)||0,Object.freeze(this)}return e(t,[{key:"setX",value:function(t){return o(t,this.y)}},{key:"setY",value:function(t){return o(this.x,t)}},{key:"map",value:function(t){return o(t(this.x),t(this.y))}},{key:"add",value:function(t){return"number"==typeof t?o(this.x+t,this.y+t):o(this.x+t.x,this.y+t.y)}},{key:"sub",value:function(t){return"number"==typeof t?o(this.x-t,this.y-t):o(this.x-t.x,this.y-t.y)}},{key:"mult",value:function(t){return"number"==typeof t?o(this.x*t,this.y*t):o(this.x*t.x,this.y*t.y)}},{key:"div",value:function(t){return"number"==typeof t?o(this.x/t,this.y/t):o(this.x/t.x,this.y/t.y)}},{key:"empty",value:function(){return Boolean(this.x||this.y)}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){var t=this.length();return t?this.div(t):o()}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"array",value:function(){return[this.x,this.y]}},{key:"toString",value:function(){return"["+this.x+", "+this.y+"]"}},{key:"toJSON",value:function(){return[this.x,this.y]}}]),t}();function o(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(i,[null].concat(n)))}},function(t,n,r){var e=r(7).f,i=r(11),o=r(5)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(0),i=r(23),o=r(3),u=r(72),a="["+u+"]",c=RegExp("^"+a+a+"*"),f=RegExp(a+a+"*$"),s=function(t,n,r){var i={},a=o(function(){return!!u[t]()||"​"!="​"[t]()}),c=i[t]=a?n(l):u[t];r&&(i[r]=c),e(e.P+e.F*a,"String",i)},l=s.trim=function(t,n){return t=String(i(t)),1&n&&(t=t.replace(c,"")),2&n&&(t=t.replace(f,"")),t};t.exports=s},function(t,n){t.exports={}},function(t,n,r){var e=r(4);t.exports=function(t,n){if(!e(t)||t._t!==n)throw TypeError("Incompatible receiver, "+n+" required!");return t}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TEX_SIZE=n.TILE_SIZE=n.SPRITES=n.TILES=void 0;var e,i=r(43),o=(e=i)&&e.__esModule?e:{default:e};var u=Object.freeze(["tech:floor","tech:pit","tech:crate","dirt:floor","dirt:pit","dirt:crate","belt:up","belt:right","belt:down","belt:left"]),a=Object.freeze(["player","enemy","tech:wall","dirt:wall","crate","barrel","light","coin","bomb","explosion"]),c=Object.freeze((0,o.default)(16));n.TILES=u,n.SPRITES=a,n.TILE_SIZE=16,n.TEX_SIZE=c},function(t,n,r){var e=r(19);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(19),i=r(5)("toStringTag"),o="Arguments"==e(function(){return arguments}());t.exports=function(t){var n,r,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),i))?r:o?e(n):"Object"==(u=e(n))&&"function"==typeof n.callee?"Arguments":u}},function(t,n,r){var e=r(2),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n,r){var e=r(15),i=r(8),o=r(36);t.exports=function(t){return function(n,r,u){var a,c=e(n),f=i(c.length),s=o(u,f);if(t&&r!=r){for(;f>s;)if((a=c[s++])!=a)return!0}else for(;f>s;s++)if((t||s in c)&&c[s]===r)return t||s||0;return!t&&-1}}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(19);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){var e=r(4),i=r(19),o=r(5)("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,r){var e=r(5)("iterator"),i=!1;try{var o=[7][e]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!i)return!1;var r=!1;try{var o=[7],u=o[e]();u.next=function(){return{done:r=!0}},o[e]=function(){return u},t(o)}catch(t){}return r}},function(t,n,r){"use strict";var e=r(1);t.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n,r){"use strict";var e=r(12),i=r(13),o=r(3),u=r(23),a=r(5);t.exports=function(t,n,r){var c=a(t),f=r(u,c,""[t]),s=f[0],l=f[1];o(function(){var n={};return n[c]=function(){return 7},7!=""[t](n)})&&(i(String.prototype,t,s),e(RegExp.prototype,c,2==n?function(t,n){return l.call(t,this,n)}:function(t){return l.call(t,this)}))}},function(t,n,r){var e=r(1),i=r(10),o=r(5)("species");t.exports=function(t,n){var r,u=e(t).constructor;return void 0===u||void 0==(r=e(u)[o])?n:i(r)}},function(t,n,r){"use strict";var e=r(2),i=r(0),o=r(13),u=r(42),a=r(30),c=r(41),f=r(40),s=r(4),l=r(3),h=r(57),d=r(44),v=r(73);t.exports=function(t,n,r,p,y,g){var m=e[t],b=m,M=y?"set":"add",w=b&&b.prototype,x={},S=function(t){var n=w[t];o(w,t,"delete"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!s(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,r){return n.call(this,0===t?0:t,r),this})};if("function"==typeof b&&(g||w.forEach&&!l(function(){(new b).entries().next()}))){var _=new b,E=_[M](g?{}:-0,1)!=_,A=l(function(){_.has(1)}),P=h(function(t){new b(t)}),I=!g&&l(function(){for(var t=new b,n=5;n--;)t[M](n,n);return!t.has(-0)});P||((b=n(function(n,r){f(n,b,t);var e=v(new m,n,b);return void 0!=r&&c(r,y,e[M],e),e})).prototype=w,w.constructor=b),(A||I)&&(S("delete"),S("has"),y&&S("get")),(I||E)&&S(M),g&&w.clear&&delete w.clear}else b=p.getConstructor(n,t,y,M),u(b.prototype,r),a.NEED=!0;return d(b,t),x[t]=b,i(i.G+i.W+i.F*(b!=m),x),g||p.setStrong(b,t,y),b}},function(t,n,r){for(var e,i=r(2),o=r(12),u=r(33),a=u("typed_array"),c=u("view"),f=!(!i.ArrayBuffer||!i.DataView),s=f,l=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(e=i[h[l++]])?(o(e.prototype,a,!0),o(e.prototype,c,!0)):s=!1;t.exports={ABV:f,CONSTR:s,TYPED:a,VIEW:c}},function(t,n,r){"use strict";t.exports=r(34)||!r(3)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(2)[t]})},function(t,n,r){"use strict";var e=r(0);t.exports=function(t){e(e.S,t,{of:function(){for(var t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return new this(n)}})}},function(t,n,r){"use strict";var e=r(0),i=r(10),o=r(18),u=r(41);t.exports=function(t){e(e.S,t,{from:function(t){var n,r,e,a,c=arguments[1];return i(this),(n=void 0!==c)&&i(c),void 0==t?new this:(r=[],n?(e=0,a=o(c,arguments[2],2),u(t,!1,function(t){r.push(a(t,e++))})):u(t,!1,r.push,r),new this(r))}})}},function(t,n,r){var e=r(4),i=r(2).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){var e=r(2),i=r(21),o=r(34),u=r(97),a=r(7).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||a(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(52)("keys"),i=r(33);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,r){var e=r(2).document;t.exports=e&&e.documentElement},function(t,n,r){var e=r(4),i=r(1),o=function(t,n){if(i(t),!e(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,e){try{(e=r(18)(Function.call,r(16).f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,r){return o(t,r),n?t.__proto__=r:e(t,r),t}}({},!1):void 0),check:o}},function(t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,n,r){var e=r(4),i=r(71).set;t.exports=function(t,n,r){var o,u=n.constructor;return u!==r&&"function"==typeof u&&(o=u.prototype)!==r.prototype&&e(o)&&i&&i(t,o),t}},function(t,n,r){"use strict";var e=r(24),i=r(23);t.exports=function(t){var n=String(i(this)),r="",o=e(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(n+=n))1&o&&(r+=n);return r}},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,n,r){var e=r(24),i=r(23);t.exports=function(t){return function(n,r){var o,u,a=String(i(n)),c=e(r),f=a.length;return c<0||c>=f?t?"":void 0:(o=a.charCodeAt(c))<55296||o>56319||c+1===f||(u=a.charCodeAt(c+1))<56320||u>57343?t?a.charAt(c):o:t?a.slice(c,c+2):u-56320+(o-55296<<10)+65536}}},function(t,n,r){"use strict";var e=r(34),i=r(0),o=r(13),u=r(12),a=r(11),c=r(46),f=r(79),s=r(44),l=r(17),h=r(5)("iterator"),d=!([].keys&&"next"in[].keys()),v=function(){return this};t.exports=function(t,n,r,p,y,g,m){f(r,n,p);var b,M,w,x=function(t){if(!d&&t in A)return A[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},S=n+" Iterator",_="values"==y,E=!1,A=t.prototype,P=A[h]||A["@@iterator"]||y&&A[y],I=!d&&P||x(y),O=y?_?x("entries"):I:void 0,T="Array"==n?A.entries||P:P;if(T&&(w=l(T.call(new t)))!==Object.prototype&&w.next&&(s(w,S,!0),e||a(w,h)||u(w,h,v)),_&&P&&"values"!==P.name&&(E=!0,I=function(){return P.call(this)}),e&&!m||!d&&!E&&A[h]||u(A,h,I),c[n]=I,c[S]=v,y)if(b={values:_?I:x("values"),keys:g?I:x("keys"),entries:O},m)for(M in b)M in A||o(A,M,b[M]);else i(i.P+i.F*(d||E),n,b);return b}},function(t,n,r){"use strict";var e=r(37),i=r(32),o=r(44),u={};r(12)(u,r(5)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n,r){var e=r(56),i=r(23);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,n,r){var e=r(5)("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(r){try{return n[e]=!1,!"/./"[t](n)}catch(t){}}return!0}},function(t,n,r){var e=r(46),i=r(5)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},function(t,n,r){"use strict";var e=r(7),i=r(32);t.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},function(t,n,r){var e=r(51),i=r(5)("iterator"),o=r(46);t.exports=r(21).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[e(t)]}},function(t,n,r){var e=r(229);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){"use strict";var e=r(9),i=r(36),o=r(8);t.exports=function(t){for(var n=e(this),r=o(n.length),u=arguments.length,a=i(u>1?arguments[1]:void 0,r),c=u>2?arguments[2]:void 0,f=void 0===c?r:i(c,r);f>a;)n[a++]=t;return n}},function(t,n,r){"use strict";var e=r(31),i=r(113),o=r(46),u=r(15);t.exports=r(78)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==n?r:"values"==n?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n,r){var e,i,o,u=r(18),a=r(103),c=r(70),f=r(66),s=r(2),l=s.process,h=s.setImmediate,d=s.clearImmediate,v=s.MessageChannel,p=s.Dispatch,y=0,g={},m="onreadystatechange",b=function(){var t=+this;if(g.hasOwnProperty(t)){var n=g[t];delete g[t],n()}},M=function(t){b.call(t.data)};h&&d||(h=function(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return g[++y]=function(){a("function"==typeof t?t:Function(t),n)},e(y),y},d=function(t){delete g[t]},"process"==r(19)(l)?e=function(t){l.nextTick(u(b,t,1))}:p&&p.now?e=function(t){p.now(u(b,t,1))}:v?(o=(i=new v).port2,i.port1.onmessage=M,e=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+"","*")},s.addEventListener("message",M,!1)):e=m in f("script")?function(t){c.appendChild(f("script"))[m]=function(){c.removeChild(this),b.call(t)}}:function(t){setTimeout(u(b,t,1),0)}),t.exports={set:h,clear:d}},function(t,n,r){var e=r(2),i=r(88).set,o=e.MutationObserver||e.WebKitMutationObserver,u=e.process,a=e.Promise,c="process"==r(19)(u);t.exports=function(){var t,n,r,f=function(){var e,i;for(c&&(e=u.domain)&&e.exit();t;){i=t.fn,t=t.next;try{i()}catch(e){throw t?r():n=void 0,e}}n=void 0,e&&e.enter()};if(c)r=function(){u.nextTick(f)};else if(!o||e.navigator&&e.navigator.standalone)if(a&&a.resolve){var s=a.resolve();r=function(){s.then(f)}}else r=function(){i.call(e,f)};else{var l=!0,h=document.createTextNode("");new o(f).observe(h,{characterData:!0}),r=function(){h.data=l=!l}}return function(e){var i={fn:e,next:void 0};n&&(n.next=i),t||(t=i,r()),n=i}}},function(t,n,r){"use strict";var e=r(10);t.exports.f=function(t){return new function(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=e(n),this.reject=e(r)}(t)}},function(t,n,r){"use strict";var e=r(2),i=r(6),o=r(34),u=r(62),a=r(12),c=r(42),f=r(3),s=r(40),l=r(24),h=r(8),d=r(122),v=r(38).f,p=r(7).f,y=r(86),g=r(44),m="ArrayBuffer",b="DataView",M="prototype",w="Wrong index!",x=e[m],S=e[b],_=e.Math,E=e.RangeError,A=e.Infinity,P=x,I=_.abs,O=_.pow,T=_.floor,L=_.log,R=_.LN2,k="byteLength",N=i?"_b":"buffer",F=i?"_l":k,j=i?"_o":"byteOffset";function q(t,n,r){var e,i,o,u=new Array(r),a=8*r-n-1,c=(1<<a)-1,f=c>>1,s=23===n?O(2,-24)-O(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for((t=I(t))!=t||t===A?(i=t!=t?1:0,e=c):(e=T(L(t)/R),t*(o=O(2,-e))<1&&(e--,o*=2),(t+=e+f>=1?s/o:s*O(2,1-f))*o>=2&&(e++,o/=2),e+f>=c?(i=0,e=c):e+f>=1?(i=(t*o-1)*O(2,n),e+=f):(i=t*O(2,f-1)*O(2,n),e=0));n>=8;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,a+=n;a>0;u[l++]=255&e,e/=256,a-=8);return u[--l]|=128*h,u}function D(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,a=i-7,c=r-1,f=t[c--],s=127&f;for(f>>=7;a>0;s=256*s+t[c],c--,a-=8);for(e=s&(1<<-a)-1,s>>=-a,a+=n;a>0;e=256*e+t[c],c--,a-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:f?-A:A;e+=O(2,n),s-=u}return(f?-1:1)*e*O(2,s-n)}function Y(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function C(t){return[255&t]}function B(t){return[255&t,t>>8&255]}function X(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function U(t){return q(t,52,8)}function V(t){return q(t,23,4)}function W(t,n,r){p(t[M],n,{get:function(){return this[r]}})}function z(t,n,r,e){var i=d(+r);if(i+n>t[F])throw E(w);var o=t[N]._b,u=i+t[j],a=o.slice(u,u+n);return e?a:a.reverse()}function G(t,n,r,e,i,o){var u=d(+r);if(u+n>t[F])throw E(w);for(var a=t[N]._b,c=u+t[j],f=e(+i),s=0;s<n;s++)a[c+s]=f[o?s:n-s-1]}if(u.ABV){if(!f(function(){x(1)})||!f(function(){new x(-1)})||f(function(){return new x,new x(1.5),new x(NaN),x.name!=m})){for(var Z,K=(x=function(t){return s(this,x),new P(d(t))})[M]=P[M],Q=v(P),H=0;Q.length>H;)(Z=Q[H++])in x||a(x,Z,P[Z]);o||(K.constructor=x)}var J=new S(new x(2)),$=S[M].setInt8;J.setInt8(0,2147483648),J.setInt8(1,2147483649),!J.getInt8(0)&&J.getInt8(1)||c(S[M],{setInt8:function(t,n){$.call(this,t,n<<24>>24)},setUint8:function(t,n){$.call(this,t,n<<24>>24)}},!0)}else x=function(t){s(this,x,m);var n=d(t);this._b=y.call(new Array(n),0),this[F]=n},S=function(t,n,r){s(this,S,b),s(t,x,b);var e=t[F],i=l(n);if(i<0||i>e)throw E("Wrong offset!");if(i+(r=void 0===r?e-i:h(r))>e)throw E("Wrong length!");this[N]=t,this[j]=i,this[F]=r},i&&(W(x,k,"_l"),W(S,"buffer","_b"),W(S,k,"_l"),W(S,"byteOffset","_o")),c(S[M],{getInt8:function(t){return z(this,1,t)[0]<<24>>24},getUint8:function(t){return z(this,1,t)[0]},getInt16:function(t){var n=z(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=z(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return Y(z(this,4,t,arguments[1]))},getUint32:function(t){return Y(z(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return D(z(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return D(z(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){G(this,1,t,C,n)},setUint8:function(t,n){G(this,1,t,C,n)},setInt16:function(t,n){G(this,2,t,B,n,arguments[2])},setUint16:function(t,n){G(this,2,t,B,n,arguments[2])},setInt32:function(t,n){G(this,4,t,X,n,arguments[2])},setUint32:function(t,n){G(this,4,t,X,n,arguments[2])},setFloat32:function(t,n){G(this,4,t,V,n,arguments[2])},setFloat64:function(t,n){G(this,8,t,U,n,arguments[2])}});g(x,m),g(S,b),a(S[M],u.VIEW,!0),n[m]=x,n[b]=S},function(t,n,r){var e=r(2).navigator;t.exports=e&&e.userAgent||""},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.worldCoord=n.blocking=n.reset=n.setupSprite=n.createSprite=n.edit=n.game=void 0;var e=function(){return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var r=[],e=!0,i=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(e=(u=a.next()).done)&&(r.push(u.value),!n||r.length!==n);e=!0);}catch(t){i=!0,o=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw o}}return r}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}}(),o=s(r(43)),u=s(r(340)),a=s(r(130)),c=r(131),f=r(132);function s(t){return t&&t.__esModule?t:{default:t}}function l(t){if(Array.isArray(t)){for(var n=0,r=Array(t.length);n<t.length;n++)r[n]=t[n];return r}return Array.from(t)}function h(t,n){var r=t.random,e=t.now;return Object.assign(n,({explosion:function(){return{created:e}},player:function(){return{dir:2,coins:0,state:"idle",phase:0}},enemy:function(){return{dir:2,state:"idle",phase:r()}},coin:function(){return{phase:r()}},bomb:function(){return{timer:4,created:e}}}[n.type]||function(){})())}function d(t,n,r){var e=t.board;return h({random:t.random,now:t.now},e.createSprite(n,r))}function v(t,n,r){t.sprites.forEach(function(n,r){return"player"!==r&&[].concat(l(n)).forEach(function(n){return t.deleteSprite(n)})}),t.cells.forEach(function(t){return t.tile=r});var e=(0,o.default)(1,1);t.player()?t.moveSprite(t.player(),t.cell(e)):d({board:t},t.cell((0,o.default)(1,1)),"player"),[].concat(l(Array(t.width))).forEach(function(r,e){d({board:t},t.cell((0,o.default)(e,0)),n),d({board:t},t.cell((0,o.default)(e,t.height-1)),n)}),[].concat(l(Array(t.height-2))).forEach(function(r,e){d({board:t},t.cell((0,o.default)(0,e+1)),n),d({board:t},t.cell((0,o.default)(t.width-1,e+1)),n)})}function p(t,n,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,o.default)(0,0),i=n.getBoundingClientRect(),u=i.top,a=i.left,c=i.width,f=i.height,s=n.width/n.height;return c/f>s?(a+=(c-f*s)/2,c=f*s):(u+=(f-c*(1/s))/2,f=c*(1/s)),r.sub((0,o.default)(a,u)).div((0,o.default)(c,f)).mult((0,o.default)(t.width-1,t.height-1)).add((0,o.default)(.5,0)).add(e).map(function(t){return Math.floor(t)})}function y(t,n){var r=t.tile,e=t.sprites;if(n){if("crate"===n.type)return!r.match(/:pit$/)&&e.some(function(t){return"explosion"!==t.type});if("player"===n.type)return r.match(/:pit$/)||e.some(function(t){var n=t.type;return"explosion"!==n&&"coin"!==n});if("explosion"===n.type)return e.some(function(t){var n=t.type;return"explosion"!==n&&"coin"!==n})}return r.match(/:pit$/)||e.some(function(t){return"explosion"!==t.type})}n.game=function(t,n){var r=t.board,i=t.random,s=t.now,h=n.canvas,v=n.events,M=n.sounds,w=n.coins;M.explode.retrigger=.1;var x=function(t){t.state="death",t.phase=s,t.dir=2},S=function(){var t=r.player();if(_(),r.sprites.get("coin").length){var n=new g,h=!1;r.sprites.get("enemy").forEach(function(o){if(t&&"death"!==t.state&&o.cell.pos.sub(t.cell.pos).length()<6){var a=(l=o,d=t.cell,(0,u.default)(l.cell,d,{neighbors:function(t){return r.neighbors(t)},passable:function(t){return t===r.player().cell||!y(t,l)}}));if(2===a.length)return h=!0,void m(o,t.cell);if(a.length){var f=e(a,2),s=f[1];return n.add(o.cell,s,o),void m(o,s)}}var l,d;!function(t){var e=r.neighbors(t.cell),o=e.filter(function(n){return!y(n,t)});if(o.length){var u=(0,c.randItem)(i)(o);n.add(t.cell,u,t),t.dir=e.indexOf(u)}}(o)}),n.reduce({board:r,random:i}),r.sprites.get("bomb").forEach(function(t){t.timer-=1,0===t.timer&&function t(n){(0,f.triggerSound)(M.explode,s),r.deleteSprite(n);[[0,0],[-1,0],[1,0],[0,-1],[0,1]].forEach(function(e){for(var i=1;i<=3;i+=1){var u=r.cell(n.cell.pos.add(o.default.apply(void 0,l(e)).mult(i)));if(u&&u.sprites.some(function(t){return b(t)})&&[].concat(l(u.sprites)).forEach(function(n){"bomb"===n.type&&t(n),"player"===n.type?x(n):"coin"!==n.type&&r.deleteSprite(n)},null),y(u,{type:"explosion"}))return;d({board:r,now:s},u,"explosion")}})}(t)}),h&&x(t);var v=new g,p=!0,w=!1,S=void 0;try{for(var E,A=r.cells[Symbol.iterator]();!(p=(E=A.next()).done);p=!0){var P=E.value;if(P.tile.match(/^belt/)){var I=P.sprites.find(function(t){var n=t.type;return["crate","player","enemy"].includes(n)});if(I){var O={"belt:up":(0,o.default)(0,-1),"belt:right":(0,o.default)(1,0),"belt:down":(0,o.default)(0,1),"belt:left":(0,o.default)(-1,0)}[P.tile],T=r.cell(P.pos.add(O));y(T,I)||v.add(P,T,I)}}}}catch(t){w=!0,S=t}finally{try{!p&&A.return&&A.return()}finally{if(w)throw S}}v.reduce({board:r,random:i}),_()}else(0,a.default)({board:r,random:i,now:s})},_=function(){var t=r.player();if(t){var n=t.cell.sprites.find(function(t){var n=t.type;return"coin"===n});n&&((0,f.triggerSound)(M.coin,s),t.coins+=1,r.deleteSprite(n))}},E=function(t,n){var e=r.player();if(e&&"death"!==e.state){var o=new g,u=e.cell.pos.add(t);if(r.valid(u)){var a=r.cell(u),c=null;if(c=a.sprites.find(function(t){var n=t.type;return"crate"===n})){var l=r.cell(a.pos.add(t));y(l,c)||(o.add(e.cell,a,e),o.add(a,l,c),l.tile.match(/:pit$/)?(0,f.triggerSound)(M.thud,s):(0,f.triggerSound)(M.push,s))}else y(a,e)||o.add(e.cell,a,e);o.length&&(o.reduce({board:r,random:i}),S())}e.dir=n}},A=function(){if(!P()){var t=r.player();if("death"!==t.state){var n=t.cell.pos.add([(0,o.default)(0,-1),(0,o.default)(1,0),(0,o.default)(0,1),(0,o.default)(-1,0)][t.dir]);if(r.valid(n)){var e=r.cell(n);y(e,{type:"bomb"})||(d({board:r,now:s},e,"bomb"),S())}}}},P=function(){return!r.player()&&((0,a.default)({board:r,random:i,now:s}),!0)};I=r.player(),I&&"death"===I.state&&s-I.phase>1e3&&(d({board:r,now:s},I.cell,"explosion"),(0,f.triggerSound)(M.explode,s),r.deleteSprite(I)),[].concat(l(r.sprites.get("explosion"))).forEach(function(t){return s-t.created>800&&r.deleteSprite(t)});var I;var O=!0,T=!1,L=void 0;try{for(var R,k=v[Symbol.iterator]();!(O=(R=k.next()).done);O=!0){var N=R.value,F=N.type,j=N.touches,q=N.code;if("keydown"===F)(({ArrowUp:function(){return E((0,o.default)(0,-1),0)},ArrowRight:function(){return E((0,o.default)(1,0),1)},ArrowDown:function(){return E((0,o.default)(0,1),2)},ArrowLeft:function(){return E((0,o.default)(-1,0),3)},KeyW:function(){return E((0,o.default)(0,-1),0)},KeyD:function(){return E((0,o.default)(1,0),1)},KeyS:function(){return E((0,o.default)(0,1),2)},KeyA:function(){return E((0,o.default)(-1,0),3)},KeyK:function(){return P()?0:x(r.player())},KeyZ:function(){return P()||S()},Space:function(){return A()}})[q]||function(){return 0})();else if("touchstart"===F&&j.length){if(P())continue;var D=j[0],Y=D.clientX,C=D.clientY,B=p(r,h,(0,o.default)(Y,C)),X=B.sub(r.player().cell.pos);Math.abs(X.x)>Math.abs(X.y)?X.x<0?E((0,o.default)(-1,0),3):X.x>0&&E((0,o.default)(1,0),1):0===X.x&&0===X.y||(X.y<0?E((0,o.default)(0,-1),0):X.y>0&&E((0,o.default)(0,1),2))}}}catch(t){T=!0,L=t}finally{try{!O&&k.return&&k.return()}finally{if(T)throw L}}var U=r.player();U&&(w.value=U.coins)},n.edit=function(t,n){var r=t.board,i=t.editor,u=t.random,a=t.now,c=n.window,s=n.canvas,h=n.events,y=n.sounds;h.forEach(function(t){var n=t.type,h=t.code,g=t.buttons,m=t.clientX,b=t.clientY;if("mousedown"===n||"mousemove"===n){var w=p(r,s,(0,o.default)(m,b),(0,o.default)(0,.5));if(r.valid(w))if("fg"===i.mode){var x=r.cell(w),S=x.sprites;if(1&g){[].concat(l(S)).forEach(function(t){return"player"!==t.type&&r.deleteSprite(t)});var _=r.player();if(_&&"player"===i.sprite())r.moveSprite(_,r.cell(w));else if(!S.length){var E=d({board:r,random:u,now:a},r.cell(w),i.sprite());"explosion"===E.type&&(0,f.triggerSound)(y.explode,a)}}else 2&g&&[].concat(l(S)).forEach(function(t){return"player"!==t.type&&r.deleteSprite(t)})}else"bg"===i.mode&&1&g&&(r.cell(w).tile=i.tile())}else(({BracketLeft:function(){return i.prev()},BracketRight:function(){return i.next()},Tab:function(){return i.toggleMode()},KeyC:function(){return v(r,"tech:wall","tech:floor")},KeyS:function(){var t=c.document.createElement("a");t.href=URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),t.download=t.href.split("/")[1]+".json",t.click()},KeyL:function(){var t=c.document.createElement("input");t.type="file",new Promise(function(n){return t.addEventListener("change",function(t){var r=e(t.target.files,1),i=r[0];return n(i)})}).then(function(t){if(!t)return Promise.reject(t);if("application/json"!==t.type)throw new Error("Invalid file type: "+t.type);return new Promise(function(n,r){var e=new FileReader;e.addEventListener("loadend",function(){return n(e.result)}),e.addEventListener("error",function(t){return r(t.error||e.error)}),e.readAsText(t)})}).then(function(t){return M({board:r,random:u,now:a},JSON.parse(t))}).catch(function(t){return t&&c.alert(t)}),t.click()}})[h]||function(){return 0})()})},n.createSprite=d,n.setupSprite=h,n.reset=v,n.blocking=y,n.worldCoord=p;var g=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.nodes=new Map,this.length=0}return i(t,[{key:"add",value:function(t,n,r){var e=this.nodes.get(t);e||this.nodes.set(t,e={in:[],out:null}),e.out=r;var i=this.nodes.get(n);i||this.nodes.set(n,i={in:[],out:null}),i.in.push(r),this.length+=1}},{key:"_resolve",value:function(t,n){var r=n.random,e=this.nodes.get(t),i=e.in.filter(function(n){return!y(t,n)});if(i.length){var o=(0,c.randItem)(r)(i);this.length-=e.in.length;var u=!0,a=!1,f=void 0;try{for(var s,l=e.in[Symbol.iterator]();!(u=(s=l.next()).done);u=!0){var h=s.value,d=this.nodes.get(h.cell);d.out=null,d.in.length||this.nodes.delete(h.cell)}}catch(t){a=!0,f=t}finally{try{!u&&l.return&&l.return()}finally{if(a)throw f}}return this.nodes.delete(t),o}return null}},{key:"reduce",value:function(t){var n=t.board,r=t.random,i=[],o=[];do{i=[],o=[].concat(l(this.nodes)).map(function(t){var n=e(t,2),r=n[0],i=n[1];return[r,Object.assign({},i)]});var u=!0,a=!1,c=void 0;try{for(var f,s=o[Symbol.iterator]();!(u=(f=s.next()).done);u=!0){var h=f.value,d=e(h,2),v=d[0];if(d[1].out)i.push(v);else{var p=this._resolve(v,{board:n,random:r});p&&(n.moveSprite(p,v),v.tile.match(/:pit$/)&&"crate"===p.type&&(n.deleteSprite(p),v.tile=v.tile.split(":")[0]+":crate"))}}}catch(t){a=!0,c=t}finally{try{!u&&s.return&&s.return()}finally{if(a)throw c}}}while(i.length!==o.length)}}]),t}(),m=function(t,n){n.pos.y<t.cell.pos.y?t.dir=0:n.pos.x>t.cell.pos.x?t.dir=1:n.pos.y>t.cell.pos.y?t.dir=2:n.pos.x<t.cell.pos.x&&(t.dir=3)},b=function(t){var n=t.type;return["player","enemy","barrel","bomb"].includes(n)};var M=function(t,n){var r=t.board,e=t.random,i=t.now;r.fromJSON(n),r.sprites.forEach(function(t){return t.forEach(function(t){return h({random:e,now:i},t)})})}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var r=[],e=!0,i=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(e=(u=a.next()).done)&&(r.push(u.value),!n||r.length!==n);e=!0);}catch(t){i=!0,o=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw o}}return r}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function i(t){if(Array.isArray(t)){for(var n=0,r=Array(t.length);n<t.length;n++)r[n]=t[n];return r}return Array.from(t)}n.remove=function(t,n){var r=t.indexOf(n);-1!==r&&t.splice(r,1)},n.partition=function(t,n){return t.reduce(function(t,r){for(var o=arguments.length,u=Array(o>2?o-2:0),a=2;a<o;a++)u[a-2]=arguments[a];var c=e(t,2),f=c[0],s=c[1];return n.apply(void 0,[r].concat(u))?[f,[].concat(i(s),[r])]:[[].concat(i(f),[r]),s]},[[],[]])}},function(t,n){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,n,r){t.exports=!r(6)&&!r(3)(function(){return 7!=Object.defineProperty(r(66)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){n.f=r(5)},function(t,n,r){var e=r(11),i=r(15),o=r(53)(!1),u=r(68)("IE_PROTO");t.exports=function(t,n){var r,a=i(t),c=0,f=[];for(r in a)r!=u&&e(a,r)&&f.push(r);for(;n.length>c;)e(a,r=n[c++])&&(~o(f,r)||f.push(r));return f}},function(t,n,r){var e=r(7),i=r(1),o=r(35);t.exports=r(6)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),a=u.length,c=0;a>c;)e.f(t,r=u[c++],n[r]);return t}},function(t,n,r){var e=r(15),i=r(38).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return u.slice()}}(t):i(e(t))}},function(t,n,r){"use strict";var e=r(35),i=r(54),o=r(50),u=r(9),a=r(49),c=Object.assign;t.exports=!c||r(3)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=c({},t)[r]||Object.keys(c({},n)).join("")!=e})?function(t,n){for(var r=u(t),c=arguments.length,f=1,s=i.f,l=o.f;c>f;)for(var h,d=a(arguments[f++]),v=s?e(d).concat(s(d)):e(d),p=v.length,y=0;p>y;)l.call(d,h=v[y++])&&(r[h]=d[h]);return r}:c},function(t,n,r){"use strict";var e=r(10),i=r(4),o=r(103),u=[].slice,a={};t.exports=Function.bind||function(t){var n=e(this),r=u.call(arguments,1),c=function(){var e=r.concat(u.call(arguments));return this instanceof c?function(t,n,r){if(!(n in a)){for(var e=[],i=0;i<n;i++)e[i]="a["+i+"]";a[n]=Function("F,a","return new F("+e.join(",")+")")}return a[n](t,r)}(n,e.length,e):o(n,e,t)};return i(n.prototype)&&(c.prototype=n.prototype),c}},function(t,n){t.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},function(t,n,r){var e=r(2).parseInt,i=r(45).trim,o=r(72),u=/^[-+]?0[xX]/;t.exports=8!==e(o+"08")||22!==e(o+"0x16")?function(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},function(t,n,r){var e=r(2).parseFloat,i=r(45).trim;t.exports=1/e(r(72)+"-0")!=-1/0?function(t){var n=i(String(t),3),r=e(n);return 0===r&&"-"==n.charAt(0)?-0:r}:e},function(t,n,r){var e=r(19);t.exports=function(t,n){if("number"!=typeof t&&"Number"!=e(t))throw TypeError(n);return+t}},function(t,n,r){var e=r(4),i=Math.floor;t.exports=function(t){return!e(t)&&isFinite(t)&&i(t)===t}},function(t,n){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n,r){var e=r(75),i=Math.pow,o=i(2,-52),u=i(2,-23),a=i(2,127)*(2-u),c=i(2,-126);t.exports=Math.fround||function(t){var n,r,i=Math.abs(t),f=e(t);return i<c?f*(i/c/u+1/o-1/o)*c*u:(r=(n=(1+u/o)*i)-(n-i))>a||r!=r?f*(1/0):f*r}},function(t,n,r){var e=r(1);t.exports=function(t,n,r,i){try{return i?n(e(r)[0],r[1]):n(r)}catch(n){var o=t.return;throw void 0!==o&&e(o.call(t)),n}}},function(t,n,r){var e=r(10),i=r(9),o=r(49),u=r(8);t.exports=function(t,n,r,a,c){e(n);var f=i(t),s=o(f),l=u(f.length),h=c?l-1:0,d=c?-1:1;if(r<2)for(;;){if(h in s){a=s[h],h+=d;break}if(h+=d,c?h<0:l<=h)throw TypeError("Reduce of empty array with no initial value")}for(;c?h>=0:l>h;h+=d)h in s&&(a=n(a,s[h],h,f));return a}},function(t,n,r){"use strict";var e=r(9),i=r(36),o=r(8);t.exports=[].copyWithin||function(t,n){var r=e(this),u=o(r.length),a=i(t,u),c=i(n,u),f=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===f?u:i(f,u))-c,u-a),l=1;for(c<a&&a<c+s&&(l=-1,c+=s-1,a+=s-1);s-- >0;)c in r?r[a]=r[c]:delete r[a],a+=l,c+=l;return r}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){r(6)&&"g"!=/./g.flags&&r(7).f(RegExp.prototype,"flags",{configurable:!0,get:r(58)})},function(t,n){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,n,r){var e=r(1),i=r(4),o=r(90);t.exports=function(t,n){if(e(t),i(n)&&n.constructor===t)return n;var r=o.f(t);return(0,r.resolve)(n),r.promise}},function(t,n,r){"use strict";var e=r(118),i=r(47);t.exports=r(61)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var n=e.getEntry(i(this,"Map"),t);return n&&n.v},set:function(t,n){return e.def(i(this,"Map"),0===t?0:t,n)}},e,!0)},function(t,n,r){"use strict";var e=r(7).f,i=r(37),o=r(42),u=r(18),a=r(40),c=r(41),f=r(78),s=r(113),l=r(39),h=r(6),d=r(30).fastKey,v=r(47),p=h?"_s":"size",y=function(t,n){var r,e=d(n);if("F"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};t.exports={getConstructor:function(t,n,r,f){var s=t(function(t,e){a(t,s,n,"_i"),t._t=n,t._i=i(null),t._f=void 0,t._l=void 0,t[p]=0,void 0!=e&&c(e,r,t[f],t)});return o(s.prototype,{clear:function(){for(var t=v(this,n),r=t._i,e=t._f;e;e=e.n)e.r=!0,e.p&&(e.p=e.p.n=void 0),delete r[e.i];t._f=t._l=void 0,t[p]=0},delete:function(t){var r=v(this,n),e=y(r,t);if(e){var i=e.n,o=e.p;delete r._i[e.i],e.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==e&&(r._f=i),r._l==e&&(r._l=o),r[p]--}return!!e},forEach:function(t){v(this,n);for(var r,e=u(t,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(e(r.v,r.k,this);r&&r.r;)r=r.p},has:function(t){return!!y(v(this,n),t)}}),h&&e(s.prototype,"size",{get:function(){return v(this,n)[p]}}),s},def:function(t,n,r){var e,i,o=y(t,n);return o?o.v=r:(t._l=o={i:i=d(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[p]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,n,r){f(t,n,function(t,r){this._t=v(t,n),this._k=r,this._l=void 0},function(){for(var t=this._k,n=this._l;n&&n.r;)n=n.p;return this._t&&(this._l=n=n?n.n:this._t._f)?s(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(this._t=void 0,s(1))},r?"entries":"values",!r,!0),l(n)}}},function(t,n,r){"use strict";var e=r(118),i=r(47);t.exports=r(61)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(i(this,"Set"),t=0===t?0:t,t)}},e)},function(t,n,r){"use strict";var e,i=r(26)(0),o=r(13),u=r(30),a=r(101),c=r(121),f=r(4),s=r(3),l=r(47),h=u.getWeak,d=Object.isExtensible,v=c.ufstore,p={},y=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(t){if(f(t)){var n=h(t);return!0===n?v(l(this,"WeakMap")).get(t):n?n[this._i]:void 0}},set:function(t,n){return c.def(l(this,"WeakMap"),t,n)}},m=t.exports=r(61)("WeakMap",y,g,c,!0,!0);s(function(){return 7!=(new m).set((Object.freeze||Object)(p),7).get(p)})&&(a((e=c.getConstructor(y,"WeakMap")).prototype,g),u.NEED=!0,i(["delete","has","get","set"],function(t){var n=m.prototype,r=n[t];o(n,t,function(n,i){if(f(n)&&!d(n)){this._f||(this._f=new e);var o=this._f[t](n,i);return"set"==t?this:o}return r.call(this,n,i)})}))},function(t,n,r){"use strict";var e=r(42),i=r(30).getWeak,o=r(1),u=r(4),a=r(40),c=r(41),f=r(26),s=r(11),l=r(47),h=f(5),d=f(6),v=0,p=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,n){return h(t.a,function(t){return t[0]===n})};y.prototype={get:function(t){var n=g(this,t);if(n)return n[1]},has:function(t){return!!g(this,t)},set:function(t,n){var r=g(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(t){var n=d(this.a,function(n){return n[0]===t});return~n&&this.a.splice(n,1),!!~n}},t.exports={getConstructor:function(t,n,r,o){var f=t(function(t,e){a(t,f,n,"_i"),t._t=n,t._i=v++,t._l=void 0,void 0!=e&&c(e,r,t[o],t)});return e(f.prototype,{delete:function(t){if(!u(t))return!1;var r=i(t);return!0===r?p(l(this,n)).delete(t):r&&s(r,this._i)&&delete r[this._i]},has:function(t){if(!u(t))return!1;var r=i(t);return!0===r?p(l(this,n)).has(t):r&&s(r,this._i)}}),f},def:function(t,n,r){var e=i(o(n),!0);return!0===e?p(t).set(n,r):e[t._i]=r,t},ufstore:p}},function(t,n,r){var e=r(24),i=r(8);t.exports=function(t){if(void 0===t)return 0;var n=e(t),r=i(n);if(n!==r)throw RangeError("Wrong length!");return r}},function(t,n,r){var e=r(38),i=r(54),o=r(1),u=r(2).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},function(t,n,r){"use strict";var e=r(55),i=r(4),o=r(8),u=r(18),a=r(5)("isConcatSpreadable");t.exports=function t(n,r,c,f,s,l,h,d){for(var v,p,y=s,g=0,m=!!h&&u(h,d,3);g<f;){if(g in c){if(v=m?m(c[g],g,r):c[g],p=!1,i(v)&&(p=void 0!==(p=v[a])?!!p:e(v)),p&&l>0)y=t(n,r,v,o(v.length),y,l-1)-1;else{if(y>=9007199254740991)throw TypeError();n[y]=v}y++}g++}return y}},function(t,n,r){var e=r(8),i=r(74),o=r(23);t.exports=function(t,n,r,u){var a=String(o(t)),c=a.length,f=void 0===r?" ":String(r),s=e(n);if(s<=c||""==f)return a;var l=s-c,h=i.call(f,Math.ceil(l/f.length));return h.length>l&&(h=h.slice(0,l)),u?h+a:a+h}},function(t,n,r){var e=r(35),i=r(15),o=r(50).f;t.exports=function(t){return function(n){for(var r,u=i(n),a=e(u),c=a.length,f=0,s=[];c>f;)o.call(u,r=a[f++])&&s.push(t?[r,u[r]]:u[r]);return s}}},function(t,n,r){var e=r(51),i=r(128);t.exports=function(t){return function(){if(e(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,n,r){var e=r(41);t.exports=function(t,n){var r=[];return e(t,!1,r.push,r,n),r}},function(t,n){t.exports=Math.scale||function(t,n,r,e,i){return 0===arguments.length||t!=t||n!=n||r!=r||e!=e||i!=i?NaN:t===1/0||t===-1/0?t:(t-n)*(i-e)/(r-n)+e}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var r=[],e=!0,i=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(e=(u=a.next()).done)&&(r.push(u.value),!n||r.length!==n);e=!0);}catch(t){i=!0,o=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw o}}return r}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=r(93),o=r(131),u=r(94);function a(t){if(Array.isArray(t)){for(var n=0,r=Array(t.length);n<t.length;n++)r[n]=t[n];return r}return Array.from(t)}n.default=function(t){var n=t.board,r=t.random,c=t.now,f=(0,o.randItem)(r)(["tech","dirt"]);(0,i.reset)(n,f+":wall",f+":floor");var s=[].concat(a(n.cells)).filter(function(t){return!(0,i.blocking)(t)}),l=function(t,u){return[].concat(a(Array(t))).forEach(function(){if(s.length){var t=s.splice((0,o.randInt)(r)(s.length),1),a=e(t,1),f=a[0].pos;(0,i.createSprite)({board:n,random:r,now:c},n.cell(f),u)}})},h=function(t,e,c){if(t<=0||!s.length)return t;t-=1;var f=[s.splice((0,o.randInt)(r)(s.length),1)[0]];e(f[0]);for(var l=[].concat(f),h=c(f[0]),d=function(t,e){return[].concat(a(t),a(n.neighbors(e).filter(function(t){return!(0,i.blocking)(t)&&s.includes(t)&&(0,o.randInt)(r)(0,10)})))};t>0&&h>0&&l.length;){l=l.reduce(d,[]),(0,o.shuffle)(r)(l);var v=!0,p=!1,y=void 0;try{for(var g,m=l[Symbol.iterator]();!(v=(g=m.next()).done);v=!0){var b=g.value;t>0&&h>0&&(e(b),f.push(b),(0,u.remove)(s,b),h-=1,t-=1)}}catch(t){p=!0,y=t}finally{try{!v&&m.return&&m.return()}finally{if(p)throw y}}}return t},d=(0,o.randInt)(r)(10,40);[].concat(a(Array(Math.floor((0,o.randInvExp)(r)(2)(8))))).forEach(function(){d=h(d,function(t){var e=t.pos;return(0,i.createSprite)({board:n,random:r,now:c},n.cell(e),f+":wall")},function(){return(0,o.randInvExp)(r)(3)(15)})}),[].concat(a(Array(Math.floor((0,o.randExp)(r)(1)(4))))).forEach(function(){d=h(d,function(t){var e=t.pos;return(0,i.createSprite)({board:n,random:r,now:c},n.cell(e),f+":wall")},function(){return(0,o.randInvExp)(r)(6)(18)})}),s=s.filter(function(t){return!n.neighbors(t).some(function(t){return(0,i.blocking)(t)})});var v=(0,o.randInt)(r)(10,50);return[].concat(a(Array(Math.floor((0,o.randInvExp)(r)(3)(6))))).forEach(function(){v=h(v,function(t){return t.tile=f+":pit"},function(){return(0,o.randInvExp)(r)(2)(10)})}),l((0,o.randInt)(r)(5,11),"coin"),l((0,o.randInt)(r)(15,21),"crate"),l((0,o.randInt)(r)(0,4),"light"),l(Math.floor((0,o.randExp)(r)(1)(4)),"barrel"),l((0,o.randInt)(r)(1,4),"enemy"),n}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(t){return function(n,r){return void 0===r?t()*n:t()*(r-n)+n}},i=function(t){return function(n,r){return Math.floor(e(t)(n,r))}},o=function(t){return function(n){return function(r){return Math.pow(e(t)(Math.pow(r,1/n)),n)}}};n.randExp=o,n.randInt=i,n.randInvExp=function(t){return function(n){return function(r){return r-o(t)(n)(r)}}},n.randItem=function(t){return function(n){return n[Math.floor(t()*n.length)]}},n.randRange=e,n.shuffle=function(t){return function(n){return n.map(function(t,r){return n.length-r}).forEach(function(r){var e=i(t)(r),o=[n[e],n[r-1]];n[r-r]=o[0],n[e]=o[1]})}}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.loadSound=function(t,n,r){return t.fetch(new t.Request(r)).then(function(t){return t.arrayBuffer()}).then(function(t){return new Promise(function(r,e){return n.decodeAudioData(t,r,e)})}).then(function(t){return t.audio=n,t})},n.triggerSound=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;(!t.source||(n-t.startedAt)/1e3>=(t.retrigger||0))&&(t.source&&(t.gainNode.disconnect(),t.source.disconnect()),t.startedAt=n,t.source=t.audio.createBufferSource(),t.source.buffer=t,t.gainNode=t.audio.createGain(),t.gainNode.gain.value=r,t.source.connect(t.gainNode),t.gainNode.connect(t.audio.destination),t.source.start(0))}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){let t=new e.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat4=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t},n.clone=function(t){let n=new e.ARRAY_TYPE(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},n.fromValues=function(t,n,r,i,o,u,a,c,f){let s=new e.ARRAY_TYPE(9);return s[0]=t,s[1]=n,s[2]=r,s[3]=i,s[4]=o,s[5]=u,s[6]=a,s[7]=c,s[8]=f,s},n.set=function(t,n,r,e,i,o,u,a,c,f){return t[0]=n,t[1]=r,t[2]=e,t[3]=i,t[4]=o,t[5]=u,t[6]=a,t[7]=c,t[8]=f,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.transpose=function(t,n){if(t===n){let r=n[1],e=n[2],i=n[5];t[1]=n[3],t[2]=n[6],t[3]=r,t[5]=n[7],t[6]=e,t[7]=i}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t},n.invert=function(t,n){let r=n[0],e=n[1],i=n[2],o=n[3],u=n[4],a=n[5],c=n[6],f=n[7],s=n[8],l=s*u-a*f,h=-s*o+a*c,d=f*o-u*c,v=r*l+e*h+i*d;if(!v)return null;return v=1/v,t[0]=l*v,t[1]=(-s*e+i*f)*v,t[2]=(a*e-i*u)*v,t[3]=h*v,t[4]=(s*r-i*c)*v,t[5]=(-a*r+i*o)*v,t[6]=d*v,t[7]=(-f*r+e*c)*v,t[8]=(u*r-e*o)*v,t},n.adjoint=function(t,n){let r=n[0],e=n[1],i=n[2],o=n[3],u=n[4],a=n[5],c=n[6],f=n[7],s=n[8];return t[0]=u*s-a*f,t[1]=i*f-e*s,t[2]=e*a-i*u,t[3]=a*c-o*s,t[4]=r*s-i*c,t[5]=i*o-r*a,t[6]=o*f-u*c,t[7]=e*c-r*f,t[8]=r*u-e*o,t},n.determinant=function(t){let n=t[0],r=t[1],e=t[2],i=t[3],o=t[4],u=t[5],a=t[6],c=t[7],f=t[8];return n*(f*o-u*c)+r*(-f*i+u*a)+e*(c*i-o*a)},n.multiply=i,n.translate=function(t,n,r){let e=n[0],i=n[1],o=n[2],u=n[3],a=n[4],c=n[5],f=n[6],s=n[7],l=n[8],h=r[0],d=r[1];return t[0]=e,t[1]=i,t[2]=o,t[3]=u,t[4]=a,t[5]=c,t[6]=h*e+d*u+f,t[7]=h*i+d*a+s,t[8]=h*o+d*c+l,t},n.rotate=function(t,n,r){let e=n[0],i=n[1],o=n[2],u=n[3],a=n[4],c=n[5],f=n[6],s=n[7],l=n[8],h=Math.sin(r),d=Math.cos(r);return t[0]=d*e+h*u,t[1]=d*i+h*a,t[2]=d*o+h*c,t[3]=d*u-h*e,t[4]=d*a-h*i,t[5]=d*c-h*o,t[6]=f,t[7]=s,t[8]=l,t},n.scale=function(t,n,r){let e=r[0],i=r[1];return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=i*n[3],t[4]=i*n[4],t[5]=i*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},n.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t},n.fromRotation=function(t,n){let r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=0,t[3]=-r,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat2d=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},n.fromQuat=function(t,n){let r=n[0],e=n[1],i=n[2],o=n[3],u=r+r,a=e+e,c=i+i,f=r*u,s=e*u,l=e*a,h=i*u,d=i*a,v=i*c,p=o*u,y=o*a,g=o*c;return t[0]=1-l-v,t[3]=s-g,t[6]=h+y,t[1]=s+g,t[4]=1-f-v,t[7]=d-p,t[2]=h-y,t[5]=d+p,t[8]=1-f-l,t},n.normalFromMat4=function(t,n){let r=n[0],e=n[1],i=n[2],o=n[3],u=n[4],a=n[5],c=n[6],f=n[7],s=n[8],l=n[9],h=n[10],d=n[11],v=n[12],p=n[13],y=n[14],g=n[15],m=r*a-e*u,b=r*c-i*u,M=r*f-o*u,w=e*c-i*a,x=e*f-o*a,S=i*f-o*c,_=s*p-l*v,E=s*y-h*v,A=s*g-d*v,P=l*y-h*p,I=l*g-d*p,O=h*g-d*y,T=m*O-b*I+M*P+w*A-x*E+S*_;if(!T)return null;return T=1/T,t[0]=(a*O-c*I+f*P)*T,t[1]=(c*A-u*O-f*E)*T,t[2]=(u*I-a*A+f*_)*T,t[3]=(i*I-e*O-o*P)*T,t[4]=(r*O-i*A+o*E)*T,t[5]=(e*A-r*I-o*_)*T,t[6]=(p*S-y*x+g*w)*T,t[7]=(y*M-v*S-g*b)*T,t[8]=(v*x-p*M+g*m)*T,t},n.projection=function(t,n,r){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},n.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},n.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t},n.subtract=o,n.multiplyScalar=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t},n.multiplyScalarAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t[6]=n[6]+r[6]*e,t[7]=n[7]+r[7]*e,t[8]=n[8]+r[8]*e,t},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]},n.equals=function(t,n){let r=t[0],i=t[1],o=t[2],u=t[3],a=t[4],c=t[5],f=t[6],s=t[7],l=t[8],h=n[0],d=n[1],v=n[2],p=n[3],y=n[4],g=n[5],m=n[6],b=n[7],M=n[8];return Math.abs(r-h)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-d)<=e.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-v)<=e.EPSILON*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(u-p)<=e.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(a-y)<=e.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(c-g)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(f-m)<=e.EPSILON*Math.max(1,Math.abs(f),Math.abs(m))&&Math.abs(s-b)<=e.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(l-M)<=e.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))};var e=r(29);function i(t,n,r){let e=n[0],i=n[1],o=n[2],u=n[3],a=n[4],c=n[5],f=n[6],s=n[7],l=n[8],h=r[0],d=r[1],v=r[2],p=r[3],y=r[4],g=r[5],m=r[6],b=r[7],M=r[8];return t[0]=h*e+d*u+v*f,t[1]=h*i+d*a+v*s,t[2]=h*o+d*c+v*l,t[3]=p*e+y*u+g*f,t[4]=p*i+y*a+g*s,t[5]=p*o+y*c+g*l,t[6]=m*e+b*u+M*f,t[7]=m*i+b*a+M*s,t[8]=m*o+b*c+M*l,t}function o(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t}const u=i;n.mul=u;const a=o;n.sub=a},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=i,n.clone=function(t){var n=new e.ARRAY_TYPE(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},n.length=o,n.fromValues=u,n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},n.set=function(t,n,r,e){return t[0]=n,t[1]=r,t[2]=e,t},n.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t},n.subtract=a,n.multiply=c,n.divide=f,n.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t},n.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t},n.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t},n.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t},n.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t},n.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t},n.scaleAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t},n.distance=s,n.squaredDistance=l,n.squaredLength=h,n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},n.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t},n.normalize=d,n.dot=v,n.cross=function(t,n,r){let e=n[0],i=n[1],o=n[2],u=r[0],a=r[1],c=r[2];return t[0]=i*c-o*a,t[1]=o*u-e*c,t[2]=e*a-i*u,t},n.lerp=function(t,n,r,e){let i=n[0],o=n[1],u=n[2];return t[0]=i+e*(r[0]-i),t[1]=o+e*(r[1]-o),t[2]=u+e*(r[2]-u),t},n.hermite=function(t,n,r,e,i,o){let u=o*o,a=u*(2*o-3)+1,c=u*(o-2)+o,f=u*(o-1),s=u*(3-2*o);return t[0]=n[0]*a+r[0]*c+e[0]*f+i[0]*s,t[1]=n[1]*a+r[1]*c+e[1]*f+i[1]*s,t[2]=n[2]*a+r[2]*c+e[2]*f+i[2]*s,t},n.bezier=function(t,n,r,e,i,o){let u=1-o,a=u*u,c=o*o,f=a*u,s=3*o*a,l=3*c*u,h=c*o;return t[0]=n[0]*f+r[0]*s+e[0]*l+i[0]*h,t[1]=n[1]*f+r[1]*s+e[1]*l+i[1]*h,t[2]=n[2]*f+r[2]*s+e[2]*l+i[2]*h,t},n.random=function(t,n){n=n||1;let r=2*e.RANDOM()*Math.PI,i=2*e.RANDOM()-1,o=Math.sqrt(1-i*i)*n;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=i*n,t},n.transformMat4=function(t,n,r){let e=n[0],i=n[1],o=n[2],u=r[3]*e+r[7]*i+r[11]*o+r[15];return u=u||1,t[0]=(r[0]*e+r[4]*i+r[8]*o+r[12])/u,t[1]=(r[1]*e+r[5]*i+r[9]*o+r[13])/u,t[2]=(r[2]*e+r[6]*i+r[10]*o+r[14])/u,t},n.transformMat3=function(t,n,r){let e=n[0],i=n[1],o=n[2];return t[0]=e*r[0]+i*r[3]+o*r[6],t[1]=e*r[1]+i*r[4]+o*r[7],t[2]=e*r[2]+i*r[5]+o*r[8],t},n.transformQuat=function(t,n,r){let e=n[0],i=n[1],o=n[2],u=r[0],a=r[1],c=r[2],f=r[3],s=f*e+a*o-c*i,l=f*i+c*e-u*o,h=f*o+u*i-a*e,d=-u*e-a*i-c*o;return t[0]=s*f+d*-u+l*-c-h*-a,t[1]=l*f+d*-a+h*-u-s*-c,t[2]=h*f+d*-c+s*-a-l*-u,t},n.rotateX=function(t,n,r,e){let i=[],o=[];return i[0]=n[0]-r[0],i[1]=n[1]-r[1],i[2]=n[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(e)-i[2]*Math.sin(e),o[2]=i[1]*Math.sin(e)+i[2]*Math.cos(e),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},n.rotateY=function(t,n,r,e){let i=[],o=[];return i[0]=n[0]-r[0],i[1]=n[1]-r[1],i[2]=n[2]-r[2],o[0]=i[2]*Math.sin(e)+i[0]*Math.cos(e),o[1]=i[1],o[2]=i[2]*Math.cos(e)-i[0]*Math.sin(e),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},n.rotateZ=function(t,n,r,e){let i=[],o=[];return i[0]=n[0]-r[0],i[1]=n[1]-r[1],i[2]=n[2]-r[2],o[0]=i[0]*Math.cos(e)-i[1]*Math.sin(e),o[1]=i[0]*Math.sin(e)+i[1]*Math.cos(e),o[2]=i[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},n.angle=function(t,n){let r=u(t[0],t[1],t[2]),e=u(n[0],n[1],n[2]);d(r,r),d(e,e);let i=v(r,e);return i>1?0:i<-1?Math.PI:Math.acos(i)},n.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]},n.equals=function(t,n){let r=t[0],i=t[1],o=t[2],u=n[0],a=n[1],c=n[2];return Math.abs(r-u)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-a)<=e.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(o-c)<=e.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))};var e=r(29);function i(){let t=new e.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function o(t){let n=t[0],r=t[1],e=t[2];return Math.sqrt(n*n+r*r+e*e)}function u(t,n,r){let i=new e.ARRAY_TYPE(3);return i[0]=t,i[1]=n,i[2]=r,i}function a(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t}function c(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t}function f(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t}function s(t,n){let r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2];return Math.sqrt(r*r+e*e+i*i)}function l(t,n){let r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2];return r*r+e*e+i*i}function h(t){let n=t[0],r=t[1],e=t[2];return n*n+r*r+e*e}function d(t,n){let r=n[0],e=n[1],i=n[2],o=r*r+e*e+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o),t}function v(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}const p=a;n.sub=p;const y=c;n.mul=y;const g=f;n.div=g;const m=s;n.dist=m;const b=l;n.sqrDist=b;const M=o;n.len=M;const w=h;n.sqrLen=w;const x=function(){let t=i();return function(n,r,e,i,o,u){let a,c;for(r||(r=3),e||(e=0),c=i?Math.min(i*r+e,n.length):n.length,a=e;a<c;a+=r)t[0]=n[a],t[1]=n[a+1],t[2]=n[a+2],o(t,t,u),n[a]=t[0],n[a+1]=t[1],n[a+2]=t[2];return n}}();n.forEach=x},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=i,n.clone=function(t){let n=new e.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},n.fromValues=function(t,n,r,i){let o=new e.ARRAY_TYPE(4);return o[0]=t,o[1]=n,o[2]=r,o[3]=i,o},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},n.set=function(t,n,r,e,i){return t[0]=n,t[1]=r,t[2]=e,t[3]=i,t},n.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t},n.subtract=o,n.multiply=u,n.divide=a,n.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t},n.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t},n.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t[3]=Math.min(n[3],r[3]),t},n.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t[3]=Math.max(n[3],r[3]),t},n.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t},n.scale=c,n.scaleAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t},n.distance=f,n.squaredDistance=s,n.length=l,n.squaredLength=h,n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},n.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t},n.normalize=d,n.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},n.lerp=function(t,n,r,e){let i=n[0],o=n[1],u=n[2],a=n[3];return t[0]=i+e*(r[0]-i),t[1]=o+e*(r[1]-o),t[2]=u+e*(r[2]-u),t[3]=a+e*(r[3]-a),t},n.random=function(t,n){return n=n||1,t[0]=e.RANDOM(),t[1]=e.RANDOM(),t[2]=e.RANDOM(),t[3]=e.RANDOM(),d(t,t),c(t,t,n),t},n.transformMat4=function(t,n,r){let e=n[0],i=n[1],o=n[2],u=n[3];return t[0]=r[0]*e+r[4]*i+r[8]*o+r[12]*u,t[1]=r[1]*e+r[5]*i+r[9]*o+r[13]*u,t[2]=r[2]*e+r[6]*i+r[10]*o+r[14]*u,t[3]=r[3]*e+r[7]*i+r[11]*o+r[15]*u,t},n.transformQuat=function(t,n,r){let e=n[0],i=n[1],o=n[2],u=r[0],a=r[1],c=r[2],f=r[3],s=f*e+a*o-c*i,l=f*i+c*e-u*o,h=f*o+u*i-a*e,d=-u*e-a*i-c*o;return t[0]=s*f+d*-u+l*-c-h*-a,t[1]=l*f+d*-a+h*-u-s*-c,t[2]=h*f+d*-c+s*-a-l*-u,t[3]=n[3],t},n.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},n.equals=function(t,n){let r=t[0],i=t[1],o=t[2],u=t[3],a=n[0],c=n[1],f=n[2],s=n[3];return Math.abs(r-a)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-c)<=e.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(o-f)<=e.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(u-s)<=e.EPSILON*Math.max(1,Math.abs(u),Math.abs(s))};var e=r(29);function i(){let t=new e.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function o(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}function u(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t[3]=n[3]*r[3],t}function a(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t[3]=n[3]/r[3],t}function c(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t}function f(t,n){let r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2],o=n[3]-t[3];return Math.sqrt(r*r+e*e+i*i+o*o)}function s(t,n){let r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2],o=n[3]-t[3];return r*r+e*e+i*i+o*o}function l(t){let n=t[0],r=t[1],e=t[2],i=t[3];return Math.sqrt(n*n+r*r+e*e+i*i)}function h(t){let n=t[0],r=t[1],e=t[2],i=t[3];return n*n+r*r+e*e+i*i}function d(t,n){let r=n[0],e=n[1],i=n[2],o=n[3],u=r*r+e*e+i*i+o*o;return u>0&&(u=1/Math.sqrt(u),t[0]=r*u,t[1]=e*u,t[2]=i*u,t[3]=o*u),t}const v=o;n.sub=v;const p=u;n.mul=p;const y=a;n.div=y;const g=f;n.dist=g;const m=s;n.sqrDist=m;const b=l;n.len=b;const M=h;n.sqrLen=M;const w=function(){let t=i();return function(n,r,e,i,o,u){let a,c;for(r||(r=4),e||(e=0),c=i?Math.min(i*r+e,n.length):n.length,a=e;a<c;a+=r)t[0]=n[a],t[1]=n[a+1],t[2]=n[a+2],t[3]=n[a+3],o(t,t,u),n[a]=t[0],n[a+1]=t[1],n[a+2]=t[2],n[a+3]=t[3];return n}}();n.forEach=w},function(t,n,r){r(137),t.exports=r(339)},function(t,n,r){"use strict";(function(t){if(r(138),r(335),r(336),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var n="defineProperty";function e(t,r,e){t[r]||Object[n](t,r,{writable:!0,configurable:!0,value:e})}e(String.prototype,"padLeft","".padStart),e(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&e(Array,t,Function.call.bind([][t]))})}).call(n,r(95))},function(t,n,r){r(139),r(141),r(142),r(143),r(144),r(145),r(146),r(147),r(148),r(149),r(150),r(151),r(152),r(153),r(154),r(155),r(157),r(158),r(159),r(160),r(161),r(162),r(163),r(164),r(165),r(166),r(167),r(168),r(169),r(170),r(171),r(172),r(173),r(174),r(175),r(176),r(177),r(178),r(179),r(180),r(181),r(182),r(183),r(184),r(185),r(186),r(187),r(188),r(189),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201),r(202),r(203),r(204),r(205),r(206),r(207),r(208),r(209),r(210),r(211),r(212),r(213),r(214),r(215),r(216),r(217),r(219),r(220),r(222),r(223),r(224),r(225),r(226),r(227),r(228),r(230),r(231),r(232),r(233),r(234),r(235),r(236),r(237),r(238),r(239),r(240),r(241),r(242),r(87),r(243),r(244),r(114),r(245),r(246),r(247),r(248),r(249),r(117),r(119),r(120),r(250),r(251),r(252),r(253),r(254),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(266),r(267),r(268),r(269),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(277),r(278),r(279),r(280),r(281),r(282),r(283),r(284),r(285),r(286),r(287),r(288),r(289),r(290),r(291),r(292),r(293),r(294),r(295),r(296),r(297),r(298),r(299),r(300),r(301),r(302),r(303),r(304),r(305),r(306),r(307),r(308),r(309),r(310),r(311),r(312),r(313),r(314),r(315),r(316),r(317),r(318),r(319),r(320),r(321),r(322),r(323),r(324),r(325),r(326),r(327),r(328),r(329),r(330),r(331),r(332),r(333),r(334),t.exports=r(21)},function(t,n,r){"use strict";var e=r(2),i=r(11),o=r(6),u=r(0),a=r(13),c=r(30).KEY,f=r(3),s=r(52),l=r(44),h=r(33),d=r(5),v=r(97),p=r(67),y=r(140),g=r(55),m=r(1),b=r(4),M=r(15),w=r(22),x=r(32),S=r(37),_=r(100),E=r(16),A=r(7),P=r(35),I=E.f,O=A.f,T=_.f,L=e.Symbol,R=e.JSON,k=R&&R.stringify,N="prototype",F=d("_hidden"),j=d("toPrimitive"),q={}.propertyIsEnumerable,D=s("symbol-registry"),Y=s("symbols"),C=s("op-symbols"),B=Object[N],X="function"==typeof L,U=e.QObject,V=!U||!U[N]||!U[N].findChild,W=o&&f(function(){return 7!=S(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=I(B,n);e&&delete B[n],O(t,n,r),e&&t!==B&&O(B,n,e)}:O,z=function(t){var n=Y[t]=S(L[N]);return n._k=t,n},G=X&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},Z=function(t,n,r){return t===B&&Z(C,n,r),m(t),n=w(n,!0),m(r),i(Y,n)?(r.enumerable?(i(t,F)&&t[F][n]&&(t[F][n]=!1),r=S(r,{enumerable:x(0,!1)})):(i(t,F)||O(t,F,x(1,{})),t[F][n]=!0),W(t,n,r)):O(t,n,r)},K=function(t,n){m(t);for(var r,e=y(n=M(n)),i=0,o=e.length;o>i;)Z(t,r=e[i++],n[r]);return t},Q=function(t){var n=q.call(this,t=w(t,!0));return!(this===B&&i(Y,t)&&!i(C,t))&&(!(n||!i(this,t)||!i(Y,t)||i(this,F)&&this[F][t])||n)},H=function(t,n){if(t=M(t),n=w(n,!0),t!==B||!i(Y,n)||i(C,n)){var r=I(t,n);return!r||!i(Y,n)||i(t,F)&&t[F][n]||(r.enumerable=!0),r}},J=function(t){for(var n,r=T(M(t)),e=[],o=0;r.length>o;)i(Y,n=r[o++])||n==F||n==c||e.push(n);return e},$=function(t){for(var n,r=t===B,e=T(r?C:M(t)),o=[],u=0;e.length>u;)!i(Y,n=e[u++])||r&&!i(B,n)||o.push(Y[n]);return o};X||(a((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===B&&n.call(C,r),i(this,F)&&i(this[F],t)&&(this[F][t]=!1),W(this,t,x(1,r))};return o&&V&&W(B,t,{configurable:!0,set:n}),z(t)})[N],"toString",function(){return this._k}),E.f=H,A.f=Z,r(38).f=_.f=J,r(50).f=Q,r(54).f=$,o&&!r(34)&&a(B,"propertyIsEnumerable",Q,!0),v.f=function(t){return z(d(t))}),u(u.G+u.W+u.F*!X,{Symbol:L});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;tt.length>nt;)d(tt[nt++]);for(var rt=P(d.store),et=0;rt.length>et;)p(rt[et++]);u(u.S+u.F*!X,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=L(t)},keyFor:function(t){if(!G(t))throw TypeError(t+" is not a symbol!");for(var n in D)if(D[n]===t)return n},useSetter:function(){V=!0},useSimple:function(){V=!1}}),u(u.S+u.F*!X,"Object",{create:function(t,n){return void 0===n?S(t):K(S(t),n)},defineProperty:Z,defineProperties:K,getOwnPropertyDescriptor:H,getOwnPropertyNames:J,getOwnPropertySymbols:$}),R&&u(u.S+u.F*(!X||f(function(){var t=L();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))})),"JSON",{stringify:function(t){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);if(r=n=e[1],(b(n)||void 0!==t)&&!G(t))return g(n)||(n=function(t,n){if("function"==typeof r&&(n=r.call(this,t,n)),!G(n))return n}),e[1]=n,k.apply(R,e)}}),L[N][j]||r(12)(L[N],j,L[N].valueOf),l(L,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){var e=r(35),i=r(54),o=r(50);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,a=r(t),c=o.f,f=0;a.length>f;)c.call(t,u=a[f++])&&n.push(u);return n}},function(t,n,r){var e=r(0);e(e.S,"Object",{create:r(37)})},function(t,n,r){var e=r(0);e(e.S+e.F*!r(6),"Object",{defineProperty:r(7).f})},function(t,n,r){var e=r(0);e(e.S+e.F*!r(6),"Object",{defineProperties:r(99)})},function(t,n,r){var e=r(15),i=r(16).f;r(25)("getOwnPropertyDescriptor",function(){return function(t,n){return i(e(t),n)}})},function(t,n,r){var e=r(9),i=r(17);r(25)("getPrototypeOf",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(9),i=r(35);r(25)("keys",function(){return function(t){return i(e(t))}})},function(t,n,r){r(25)("getOwnPropertyNames",function(){return r(100).f})},function(t,n,r){var e=r(4),i=r(30).onFreeze;r(25)("freeze",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(4),i=r(30).onFreeze;r(25)("seal",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(4),i=r(30).onFreeze;r(25)("preventExtensions",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(4);r(25)("isFrozen",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(4);r(25)("isSealed",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(4);r(25)("isExtensible",function(t){return function(n){return!!e(n)&&(!t||t(n))}})},function(t,n,r){var e=r(0);e(e.S+e.F,"Object",{assign:r(101)})},function(t,n,r){var e=r(0);e(e.S,"Object",{is:r(156)})},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var e=r(0);e(e.S,"Object",{setPrototypeOf:r(71).set})},function(t,n,r){"use strict";var e=r(51),i={};i[r(5)("toStringTag")]="z",i+""!="[object z]"&&r(13)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(0);e(e.P,"Function",{bind:r(102)})},function(t,n,r){var e=r(7).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||r(6)&&e(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,n,r){"use strict";var e=r(4),i=r(17),o=r(5)("hasInstance"),u=Function.prototype;o in u||r(7).f(u,o,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,n,r){var e=r(0),i=r(104);e(e.G+e.F*(parseInt!=i),{parseInt:i})},function(t,n,r){var e=r(0),i=r(105);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},function(t,n,r){"use strict";var e=r(2),i=r(11),o=r(19),u=r(73),a=r(22),c=r(3),f=r(38).f,s=r(16).f,l=r(7).f,h=r(45).trim,d=e.Number,v=d,p=d.prototype,y="Number"==o(r(37)(p)),g="trim"in String.prototype,m=function(t){var n=a(t,!1);if("string"==typeof n&&n.length>2){var r,e,i,o=(n=g?n.trim():h(n,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,c=n.slice(2),f=0,s=c.length;f<s;f++)if((u=c.charCodeAt(f))<48||u>i)return NaN;return parseInt(c,e)}}return+n};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var n=arguments.length<1?0:t,r=this;return r instanceof d&&(y?c(function(){p.valueOf.call(r)}):"Number"!=o(r))?u(new v(m(n)),r,d):m(n)};for(var b,M=r(6)?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;M.length>w;w++)i(v,b=M[w])&&!i(d,b)&&l(d,b,s(v,b));d.prototype=p,p.constructor=d,r(13)(e,"Number",d)}},function(t,n,r){"use strict";var e=r(0),i=r(24),o=r(106),u=r(74),a=1..toFixed,c=Math.floor,f=[0,0,0,0,0,0],s="Number.toFixed: incorrect invocation!",l=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*f[r],f[r]=e%1e7,e=c(e/1e7)},h=function(t){for(var n=6,r=0;--n>=0;)r+=f[n],f[n]=c(r/t),r=r%t*1e7},d=function(){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==f[t]){var r=String(f[t]);n=""===n?r:n+u.call("0",7-r.length)+r}return n},v=function(t,n,r){return 0===n?r:n%2==1?v(t,n-1,r*t):v(t*t,n/2,r)};e(e.P+e.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(3)(function(){a.call({})})),"Number",{toFixed:function(t){var n,r,e,a,c=o(this,s),f=i(t),p="",y="0";if(f<0||f>20)throw RangeError(s);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(p="-",c=-c),c>1e-21)if(r=(n=function(t){for(var n=0,r=t;r>=4096;)n+=12,r/=4096;for(;r>=2;)n+=1,r/=2;return n}(c*v(2,69,1))-69)<0?c*v(2,-n,1):c/v(2,n,1),r*=4503599627370496,(n=52-n)>0){for(l(0,r),e=f;e>=7;)l(1e7,0),e-=7;for(l(v(10,e,1),0),e=n-1;e>=23;)h(1<<23),e-=23;h(1<<e),l(1,1),h(2),y=d()}else l(0,r),l(1<<-n,0),y=d()+u.call("0",f);return y=f>0?p+((a=y.length)<=f?"0."+u.call("0",f-a)+y:y.slice(0,a-f)+"."+y.slice(a-f)):p+y}})},function(t,n,r){"use strict";var e=r(0),i=r(3),o=r(106),u=1..toPrecision;e(e.P+e.F*(i(function(){return"1"!==u.call(1,void 0)})||!i(function(){u.call({})})),"Number",{toPrecision:function(t){var n=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?u.call(n):u.call(n,t)}})},function(t,n,r){var e=r(0);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,r){var e=r(0),i=r(2).isFinite;e(e.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,r){var e=r(0);e(e.S,"Number",{isInteger:r(107)})},function(t,n,r){var e=r(0);e(e.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,r){var e=r(0),i=r(107),o=Math.abs;e(e.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,r){var e=r(0);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,r){var e=r(0);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,r){var e=r(0),i=r(105);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,n,r){var e=r(0),i=r(104);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,n,r){var e=r(0),i=r(108),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,r){var e=r(0),i=Math.asinh;e(e.S+e.F*!(i&&1/i(0)>0),"Math",{asinh:function t(n){return isFinite(n=+n)&&0!=n?n<0?-t(-n):Math.log(n+Math.sqrt(n*n+1)):n}})},function(t,n,r){var e=r(0),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,r){var e=r(0),i=r(75);e(e.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,r){var e=r(0);e(e.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,r){var e=r(0),i=Math.exp;e(e.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,r){var e=r(0),i=r(76);e(e.S+e.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,r){var e=r(0);e(e.S,"Math",{fround:r(109)})},function(t,n,r){var e=r(0),i=Math.abs;e(e.S,"Math",{hypot:function(t,n){for(var r,e,o=0,u=0,a=arguments.length,c=0;u<a;)c<(r=i(arguments[u++]))?(o=o*(e=c/r)*e+1,c=r):o+=r>0?(e=r/c)*e:r;return c===1/0?1/0:c*Math.sqrt(o)}})},function(t,n,r){var e=r(0),i=Math.imul;e(e.S+e.F*r(3)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,n){var r=+t,e=+n,i=65535&r,o=65535&e;return 0|i*o+((65535&r>>>16)*o+i*(65535&e>>>16)<<16>>>0)}})},function(t,n,r){var e=r(0);e(e.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,n,r){var e=r(0);e(e.S,"Math",{log1p:r(108)})},function(t,n,r){var e=r(0);e(e.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,r){var e=r(0);e(e.S,"Math",{sign:r(75)})},function(t,n,r){var e=r(0),i=r(76),o=Math.exp;e(e.S+e.F*r(3)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,r){var e=r(0),i=r(76),o=Math.exp;e(e.S,"Math",{tanh:function(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},function(t,n,r){var e=r(0);e(e.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,n,r){var e=r(0),i=r(36),o=String.fromCharCode,u=String.fromCodePoint;e(e.S+e.F*(!!u&&1!=u.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,u=0;e>u;){if(n=+arguments[u++],i(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?o(n):o(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){var e=r(0),i=r(15),o=r(8);e(e.S,"String",{raw:function(t){for(var n=i(t.raw),r=o(n.length),e=arguments.length,u=[],a=0;r>a;)u.push(String(n[a++])),a<e&&u.push(String(arguments[a]));return u.join("")}})},function(t,n,r){"use strict";r(45)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){"use strict";var e=r(77)(!0);r(78)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";var e=r(0),i=r(77)(!1);e(e.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(0),i=r(8),o=r(80),u="".endsWith;e(e.P+e.F*r(81)("endsWith"),"String",{endsWith:function(t){var n=o(this,t,"endsWith"),r=arguments.length>1?arguments[1]:void 0,e=i(n.length),a=void 0===r?e:Math.min(i(r),e),c=String(t);return u?u.call(n,c,a):n.slice(a-c.length,a)===c}})},function(t,n,r){"use strict";var e=r(0),i=r(80);e(e.P+e.F*r(81)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,r){var e=r(0);e(e.P,"String",{repeat:r(74)})},function(t,n,r){"use strict";var e=r(0),i=r(8),o=r(80),u="startsWith",a=""[u];e(e.P+e.F*r(81)(u),"String",{startsWith:function(t){var n=o(this,t,u),r=i(Math.min(arguments.length>1?arguments[1]:void 0,n.length)),e=String(t);return a?a.call(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){"use strict";r(14)("anchor",function(t){return function(n){return t(this,"a","name",n)}})},function(t,n,r){"use strict";r(14)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){"use strict";r(14)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){"use strict";r(14)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){"use strict";r(14)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){"use strict";r(14)("fontcolor",function(t){return function(n){return t(this,"font","color",n)}})},function(t,n,r){"use strict";r(14)("fontsize",function(t){return function(n){return t(this,"font","size",n)}})},function(t,n,r){"use strict";r(14)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){"use strict";r(14)("link",function(t){return function(n){return t(this,"a","href",n)}})},function(t,n,r){"use strict";r(14)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){"use strict";r(14)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){"use strict";r(14)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){"use strict";r(14)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){var e=r(0);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,n,r){"use strict";var e=r(0),i=r(9),o=r(22);e(e.P+e.F*r(3)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var n=i(this),r=o(n);return"number"!=typeof r||isFinite(r)?n.toISOString():null}})},function(t,n,r){var e=r(0),i=r(218);e(e.P+e.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,n,r){"use strict";var e=r(3),i=Date.prototype.getTime,o=Date.prototype.toISOString,u=function(t){return t>9?t:"0"+t};t.exports=e(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!e(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this.getUTCFullYear(),n=this.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+u(this.getUTCMonth()+1)+"-"+u(this.getUTCDate())+"T"+u(this.getUTCHours())+":"+u(this.getUTCMinutes())+":"+u(this.getUTCSeconds())+"."+(n>99?n:"0"+u(n))+"Z"}:o},function(t,n,r){var e=Date.prototype,i=e.toString,o=e.getTime;new Date(NaN)+""!="Invalid Date"&&r(13)(e,"toString",function(){var t=o.call(this);return t==t?i.call(this):"Invalid Date"})},function(t,n,r){var e=r(5)("toPrimitive"),i=Date.prototype;e in i||r(12)(i,e,r(221))},function(t,n,r){"use strict";var e=r(1),i=r(22);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(e(this),"number"!=t)}},function(t,n,r){var e=r(0);e(e.S,"Array",{isArray:r(55)})},function(t,n,r){"use strict";var e=r(18),i=r(0),o=r(9),u=r(110),a=r(82),c=r(8),f=r(83),s=r(84);i(i.S+i.F*!r(57)(function(t){Array.from(t)}),"Array",{from:function(t){var n,r,i,l,h=o(t),d="function"==typeof this?this:Array,v=arguments.length,p=v>1?arguments[1]:void 0,y=void 0!==p,g=0,m=s(h);if(y&&(p=e(p,v>2?arguments[2]:void 0,2)),void 0==m||d==Array&&a(m))for(r=new d(n=c(h.length));n>g;g++)f(r,g,y?p(h[g],g):h[g]);else for(l=m.call(h),r=new d;!(i=l.next()).done;g++)f(r,g,y?u(l,p,[i.value,g],!0):i.value);return r.length=g,r}})},function(t,n,r){"use strict";var e=r(0),i=r(83);e(e.S+e.F*r(3)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);n>t;)i(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,r){"use strict";var e=r(0),i=r(15),o=[].join;e(e.P+e.F*(r(49)!=Object||!r(20)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,n,r){"use strict";var e=r(0),i=r(70),o=r(19),u=r(36),a=r(8),c=[].slice;e(e.P+e.F*r(3)(function(){i&&c.call(i)}),"Array",{slice:function(t,n){var r=a(this.length),e=o(this);if(n=void 0===n?r:n,"Array"==e)return c.call(this,t,n);for(var i=u(t,r),f=u(n,r),s=a(f-i),l=new Array(s),h=0;h<s;h++)l[h]="String"==e?this.charAt(i+h):this[i+h];return l}})},function(t,n,r){"use strict";var e=r(0),i=r(10),o=r(9),u=r(3),a=[].sort,c=[1,2,3];e(e.P+e.F*(u(function(){c.sort(void 0)})||!u(function(){c.sort(null)})||!r(20)(a)),"Array",{sort:function(t){return void 0===t?a.call(o(this)):a.call(o(this),i(t))}})},function(t,n,r){"use strict";var e=r(0),i=r(26)(0),o=r(20)([].forEach,!0);e(e.P+e.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,n,r){var e=r(4),i=r(55),o=r(5)("species");t.exports=function(t){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&null===(n=n[o])&&(n=void 0)),void 0===n?Array:n}},function(t,n,r){"use strict";var e=r(0),i=r(26)(1);e(e.P+e.F*!r(20)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(0),i=r(26)(2);e(e.P+e.F*!r(20)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(0),i=r(26)(3);e(e.P+e.F*!r(20)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(0),i=r(26)(4);e(e.P+e.F*!r(20)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(0),i=r(111);e(e.P+e.F*!r(20)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){"use strict";var e=r(0),i=r(111);e(e.P+e.F*!r(20)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){"use strict";var e=r(0),i=r(53)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(20)(o)),"Array",{indexOf:function(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(0),i=r(15),o=r(24),u=r(8),a=[].lastIndexOf,c=!!a&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(c||!r(20)(a)),"Array",{lastIndexOf:function(t){if(c)return a.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(arguments.length>1&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);e>=0;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){var e=r(0);e(e.P,"Array",{copyWithin:r(112)}),r(31)("copyWithin")},function(t,n,r){var e=r(0);e(e.P,"Array",{fill:r(86)}),r(31)("fill")},function(t,n,r){"use strict";var e=r(0),i=r(26)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),e(e.P+e.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(31)("find")},function(t,n,r){"use strict";var e=r(0),i=r(26)(6),o=!0;"findIndex"in[]&&Array(1).findIndex(function(){o=!1}),e(e.P+e.F*o,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(31)("findIndex")},function(t,n,r){r(39)("Array")},function(t,n,r){var e=r(2),i=r(73),o=r(7).f,u=r(38).f,a=r(56),c=r(58),f=e.RegExp,s=f,l=f.prototype,h=/a/g,d=/a/g,v=new f(h)!==h;if(r(6)&&(!v||r(3)(function(){return d[r(5)("match")]=!1,f(h)!=h||f(d)==d||"/a/i"!=f(h,"i")}))){f=function(t,n){var r=this instanceof f,e=a(t),o=void 0===n;return!r&&e&&t.constructor===f&&o?t:i(v?new s(e&&!o?t.source:t,n):s((e=t instanceof f)?t.source:t,e&&o?c.call(t):n),r?this:l,f)};for(var p=function(t){t in f||o(f,t,{configurable:!0,get:function(){return s[t]},set:function(n){s[t]=n}})},y=u(s),g=0;y.length>g;)p(y[g++]);l.constructor=f,f.prototype=l,r(13)(e,"RegExp",f)}r(39)("RegExp")},function(t,n,r){"use strict";r(114);var e=r(1),i=r(58),o=r(6),u=/./.toString,a=function(t){r(13)(RegExp.prototype,"toString",t,!0)};r(3)(function(){return"/a/b"!=u.call({source:"a",flags:"b"})})?a(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):"toString"!=u.name&&a(function(){return u.call(this)})},function(t,n,r){r(59)("match",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(59)("replace",2,function(t,n,r){return[function(e,i){"use strict";var o=t(this),u=void 0==e?void 0:e[n];return void 0!==u?u.call(e,o,i):r.call(String(o),e,i)},r]})},function(t,n,r){r(59)("search",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(59)("split",2,function(t,n,e){"use strict";var i=r(56),o=e,u=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var a=void 0===/()??/.exec("")[1];e=function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!i(t))return o.call(r,t,n);var e,c,f,s,l,h=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,p=void 0===n?4294967295:n>>>0,y=new RegExp(t.source,d+"g");for(a||(e=new RegExp("^"+y.source+"$(?!\\s)",d));(c=y.exec(r))&&!((f=c.index+c[0].length)>v&&(h.push(r.slice(v,c.index)),!a&&c.length>1&&c[0].replace(e,function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(c[l]=void 0)}),c.length>1&&c.index<r.length&&u.apply(h,c.slice(1)),s=c[0].length,v=f,h.length>=p));)y.lastIndex===c.index&&y.lastIndex++;return v===r.length?!s&&y.test("")||h.push(""):h.push(r.slice(v)),h.length>p?h.slice(0,p):h}}else"0".split(void 0,0).length&&(e=function(t,n){return void 0===t&&0===n?[]:o.call(this,t,n)});return[function(r,i){var o=t(this),u=void 0==r?void 0:r[n];return void 0!==u?u.call(r,o,i):e.call(String(o),r,i)},e]})},function(t,n,r){"use strict";var e,i,o,u,a=r(34),c=r(2),f=r(18),s=r(51),l=r(0),h=r(4),d=r(10),v=r(40),p=r(41),y=r(60),g=r(88).set,m=r(89)(),b=r(90),M=r(115),w=r(116),x="Promise",S=c.TypeError,_=c.process,E=c[x],A="process"==s(_),P=function(){},I=i=b.f,O=!!function(){try{var t=E.resolve(1),n=(t.constructor={})[r(5)("species")]=function(t){t(P,P)};return(A||"function"==typeof PromiseRejectionEvent)&&t.then(P)instanceof n}catch(t){}}(),T=function(t){var n;return!(!h(t)||"function"!=typeof(n=t.then))&&n},L=function(t,n){if(!t._n){t._n=!0;var r=t._c;m(function(){for(var e=t._v,i=1==t._s,o=0,u=function(n){var r,o,u=i?n.ok:n.fail,a=n.resolve,c=n.reject,f=n.domain;try{u?(i||(2==t._h&&N(t),t._h=1),!0===u?r=e:(f&&f.enter(),r=u(e),f&&f.exit()),r===n.promise?c(S("Promise-chain cycle")):(o=T(r))?o.call(r,a,c):a(r)):c(e)}catch(t){c(t)}};r.length>o;)u(r[o++]);t._c=[],t._n=!1,n&&!t._h&&R(t)})}},R=function(t){g.call(c,function(){var n,r,e,i=t._v,o=k(t);if(o&&(n=M(function(){A?_.emit("unhandledRejection",i,t):(r=c.onunhandledrejection)?r({promise:t,reason:i}):(e=c.console)&&e.error&&e.error("Unhandled promise rejection",i)}),t._h=A||k(t)?2:1),t._a=void 0,o&&n.e)throw n.v})},k=function(t){return 1!==t._h&&0===(t._a||t._c).length},N=function(t){g.call(c,function(){var n;A?_.emit("rejectionHandled",t):(n=c.onrejectionhandled)&&n({promise:t,reason:t._v})})},F=function(t){var n=this;n._d||(n._d=!0,(n=n._w||n)._v=t,n._s=2,n._a||(n._a=n._c.slice()),L(n,!0))},j=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw S("Promise can't be resolved itself");(n=T(t))?m(function(){var e={_w:r,_d:!1};try{n.call(t,f(j,e,1),f(F,e,1))}catch(t){F.call(e,t)}}):(r._v=t,r._s=1,L(r,!1))}catch(t){F.call({_w:r,_d:!1},t)}}};O||(E=function(t){v(this,E,x,"_h"),d(t),e.call(this);try{t(f(j,this,1),f(F,this,1))}catch(t){F.call(this,t)}},(e=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(42)(E.prototype,{then:function(t,n){var r=I(y(this,E));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=A?_.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&L(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new e;this.promise=t,this.resolve=f(j,t,1),this.reject=f(F,t,1)},b.f=I=function(t){return t===E||t===u?new o(t):i(t)}),l(l.G+l.W+l.F*!O,{Promise:E}),r(44)(E,x),r(39)(x),u=r(21)[x],l(l.S+l.F*!O,x,{reject:function(t){var n=I(this);return(0,n.reject)(t),n.promise}}),l(l.S+l.F*(a||!O),x,{resolve:function(t){return w(a&&this===u?E:this,t)}}),l(l.S+l.F*!(O&&r(57)(function(t){E.all(t).catch(P)})),x,{all:function(t){var n=this,r=I(n),e=r.resolve,i=r.reject,o=M(function(){var r=[],o=0,u=1;p(t,!1,function(t){var a=o++,c=!1;r.push(void 0),u++,n.resolve(t).then(function(t){c||(c=!0,r[a]=t,--u||e(r))},i)}),--u||e(r)});return o.e&&i(o.v),r.promise},race:function(t){var n=this,r=I(n),e=r.reject,i=M(function(){p(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i.e&&e(i.v),r.promise}})},function(t,n,r){"use strict";var e=r(121),i=r(47);r(61)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(i(this,"WeakSet"),t,!0)}},e,!1,!0)},function(t,n,r){"use strict";var e=r(0),i=r(62),o=r(91),u=r(1),a=r(36),c=r(8),f=r(4),s=r(2).ArrayBuffer,l=r(60),h=o.ArrayBuffer,d=o.DataView,v=i.ABV&&s.isView,p=h.prototype.slice,y=i.VIEW,g="ArrayBuffer";e(e.G+e.W+e.F*(s!==h),{ArrayBuffer:h}),e(e.S+e.F*!i.CONSTR,g,{isView:function(t){return v&&v(t)||f(t)&&y in t}}),e(e.P+e.U+e.F*r(3)(function(){return!new h(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==p&&void 0===n)return p.call(u(this),t);for(var r=u(this).byteLength,e=a(t,r),i=a(void 0===n?r:n,r),o=new(l(this,h))(c(i-e)),f=new d(this),s=new d(o),v=0;e<i;)s.setUint8(v++,f.getUint8(e++));return o}}),r(39)(g)},function(t,n,r){var e=r(0);e(e.G+e.W+e.F*!r(62).ABV,{DataView:r(91).DataView})},function(t,n,r){r(27)("Int8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(27)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(27)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}},!0)},function(t,n,r){r(27)("Int16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(27)("Uint16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(27)("Int32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(27)("Uint32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(27)("Float32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(27)("Float64",8,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){var e=r(0),i=r(10),o=r(1),u=(r(2).Reflect||{}).apply,a=Function.apply;e(e.S+e.F*!r(3)(function(){u(function(){})}),"Reflect",{apply:function(t,n,r){var e=i(t),c=o(r);return u?u(e,n,c):a.call(e,n,c)}})},function(t,n,r){var e=r(0),i=r(37),o=r(10),u=r(1),a=r(4),c=r(3),f=r(102),s=(r(2).Reflect||{}).construct,l=c(function(){function t(){}return!(s(function(){},[],t)instanceof t)}),h=!c(function(){s(function(){})});e(e.S+e.F*(l||h),"Reflect",{construct:function(t,n){o(t),u(n);var r=arguments.length<3?t:o(arguments[2]);if(h&&!l)return s(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(f.apply(t,e))}var c=r.prototype,d=i(a(c)?c:Object.prototype),v=Function.apply.call(t,d,n);return a(v)?v:d}})},function(t,n,r){var e=r(7),i=r(0),o=r(1),u=r(22);i(i.S+i.F*r(3)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},function(t,n,r){var e=r(0),i=r(16).f,o=r(1);e(e.S,"Reflect",{deleteProperty:function(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},function(t,n,r){"use strict";var e=r(0),i=r(1),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};r(79)(o,"Object",function(){var t,n=this._k;do{if(this._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[this._i++])in this._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,n,r){var e=r(16),i=r(17),o=r(11),u=r(0),a=r(4),c=r(1);u(u.S,"Reflect",{get:function t(n,r){var u,f,s=arguments.length<3?n:arguments[2];return c(n)===s?n[r]:(u=e.f(n,r))?o(u,"value")?u.value:void 0!==u.get?u.get.call(s):void 0:a(f=i(n))?t(f,r,s):void 0}})},function(t,n,r){var e=r(16),i=r(0),o=r(1);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return e.f(o(t),n)}})},function(t,n,r){var e=r(0),i=r(17),o=r(1);e(e.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,r){var e=r(0);e(e.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,r){var e=r(0),i=r(1),o=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,r){var e=r(0);e(e.S,"Reflect",{ownKeys:r(123)})},function(t,n,r){var e=r(0),i=r(1),o=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,r){var e=r(7),i=r(16),o=r(17),u=r(11),a=r(0),c=r(32),f=r(1),s=r(4);a(a.S,"Reflect",{set:function t(n,r,a){var l,h,d=arguments.length<4?n:arguments[3],v=i.f(f(n),r);if(!v){if(s(h=o(n)))return t(h,r,a,d);v=c(0)}return u(v,"value")?!(!1===v.writable||!s(d)||((l=i.f(d,r)||c(0)).value=a,e.f(d,r,l),0)):void 0!==v.set&&(v.set.call(d,a),!0)}})},function(t,n,r){var e=r(0),i=r(71);i&&e(e.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,r){"use strict";var e=r(0),i=r(53)(!0);e(e.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(31)("includes")},function(t,n,r){"use strict";var e=r(0),i=r(124),o=r(9),u=r(8),a=r(10),c=r(85);e(e.P,"Array",{flatMap:function(t){var n,r,e=o(this);return a(t),n=u(e.length),r=c(e,0),i(r,e,e,n,0,1,t,arguments[1]),r}}),r(31)("flatMap")},function(t,n,r){"use strict";var e=r(0),i=r(124),o=r(9),u=r(8),a=r(24),c=r(85);e(e.P,"Array",{flatten:function(){var t=arguments[0],n=o(this),r=u(n.length),e=c(n,0);return i(e,n,n,r,0,void 0===t?1:a(t)),e}}),r(31)("flatten")},function(t,n,r){"use strict";var e=r(0),i=r(77)(!0);e(e.P,"String",{at:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(0),i=r(125),o=r(92);e(e.P+e.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,n,r){"use strict";var e=r(0),i=r(125),o=r(92);e(e.P+e.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,n,r){"use strict";r(45)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,n,r){"use strict";r(45)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,n,r){"use strict";var e=r(0),i=r(23),o=r(8),u=r(56),a=r(58),c=RegExp.prototype,f=function(t,n){this._r=t,this._s=n};r(79)(f,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),e(e.P,"String",{matchAll:function(t){if(i(this),!u(t))throw TypeError(t+" is not a regexp!");var n=String(this),r="flags"in c?String(t.flags):a.call(t),e=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return e.lastIndex=o(t.lastIndex),new f(e,n)}})},function(t,n,r){r(67)("asyncIterator")},function(t,n,r){r(67)("observable")},function(t,n,r){var e=r(0),i=r(123),o=r(15),u=r(16),a=r(83);e(e.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,r,e=o(t),c=u.f,f=i(e),s={},l=0;f.length>l;)void 0!==(r=c(e,n=f[l++]))&&a(s,n,r);return s}})},function(t,n,r){var e=r(0),i=r(126)(!1);e(e.S,"Object",{values:function(t){return i(t)}})},function(t,n,r){var e=r(0),i=r(126)(!0);e(e.S,"Object",{entries:function(t){return i(t)}})},function(t,n,r){"use strict";var e=r(0),i=r(9),o=r(10),u=r(7);r(6)&&e(e.P+r(63),"Object",{__defineGetter__:function(t,n){u.f(i(this),t,{get:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){"use strict";var e=r(0),i=r(9),o=r(10),u=r(7);r(6)&&e(e.P+r(63),"Object",{__defineSetter__:function(t,n){u.f(i(this),t,{set:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){"use strict";var e=r(0),i=r(9),o=r(22),u=r(17),a=r(16).f;r(6)&&e(e.P+r(63),"Object",{__lookupGetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=a(r,e))return n.get}while(r=u(r))}})},function(t,n,r){"use strict";var e=r(0),i=r(9),o=r(22),u=r(17),a=r(16).f;r(6)&&e(e.P+r(63),"Object",{__lookupSetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=a(r,e))return n.set}while(r=u(r))}})},function(t,n,r){var e=r(0);e(e.P+e.R,"Map",{toJSON:r(127)("Map")})},function(t,n,r){var e=r(0);e(e.P+e.R,"Set",{toJSON:r(127)("Set")})},function(t,n,r){r(64)("Map")},function(t,n,r){r(64)("Set")},function(t,n,r){r(64)("WeakMap")},function(t,n,r){r(64)("WeakSet")},function(t,n,r){r(65)("Map")},function(t,n,r){r(65)("Set")},function(t,n,r){r(65)("WeakMap")},function(t,n,r){r(65)("WeakSet")},function(t,n,r){var e=r(0);e(e.G,{global:r(2)})},function(t,n,r){var e=r(0);e(e.S,"System",{global:r(2)})},function(t,n,r){var e=r(0),i=r(19);e(e.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,n,r){var e=r(0);e(e.S,"Math",{clamp:function(t,n,r){return Math.min(r,Math.max(n,t))}})},function(t,n,r){var e=r(0);e(e.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,n,r){var e=r(0),i=180/Math.PI;e(e.S,"Math",{degrees:function(t){return t*i}})},function(t,n,r){var e=r(0),i=r(129),o=r(109);e(e.S,"Math",{fscale:function(t,n,r,e,u){return o(i(t,n,r,e,u))}})},function(t,n,r){var e=r(0);e(e.S,"Math",{iaddh:function(t,n,r,e){var i=t>>>0,o=r>>>0;return(n>>>0)+(e>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(t,n,r){var e=r(0);e(e.S,"Math",{isubh:function(t,n,r,e){var i=t>>>0,o=r>>>0;return(n>>>0)-(e>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(t,n,r){var e=r(0);e(e.S,"Math",{imulh:function(t,n){var r=+t,e=+n,i=65535&r,o=65535&e,u=r>>16,a=e>>16,c=(u*o>>>0)+(i*o>>>16);return u*a+(c>>16)+((i*a>>>0)+(65535&c)>>16)}})},function(t,n,r){var e=r(0);e(e.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,n,r){var e=r(0),i=Math.PI/180;e(e.S,"Math",{radians:function(t){return t*i}})},function(t,n,r){var e=r(0);e(e.S,"Math",{scale:r(129)})},function(t,n,r){var e=r(0);e(e.S,"Math",{umulh:function(t,n){var r=+t,e=+n,i=65535&r,o=65535&e,u=r>>>16,a=e>>>16,c=(u*o>>>0)+(i*o>>>16);return u*a+(c>>>16)+((i*a>>>0)+(65535&c)>>>16)}})},function(t,n,r){var e=r(0);e(e.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},function(t,n,r){"use strict";var e=r(0),i=r(21),o=r(2),u=r(60),a=r(116);e(e.P+e.R,"Promise",{finally:function(t){var n=u(this,i.Promise||o.Promise),r="function"==typeof t;return this.then(r?function(r){return a(n,t()).then(function(){return r})}:t,r?function(r){return a(n,t()).then(function(){throw r})}:t)}})},function(t,n,r){"use strict";var e=r(0),i=r(90),o=r(115);e(e.S,"Promise",{try:function(t){var n=i.f(this),r=o(t);return(r.e?n.reject:n.resolve)(r.v),n.promise}})},function(t,n,r){var e=r(28),i=r(1),o=e.key,u=e.set;e.exp({defineMetadata:function(t,n,r,e){u(t,n,i(r),o(e))}})},function(t,n,r){var e=r(28),i=r(1),o=e.key,u=e.map,a=e.store;e.exp({deleteMetadata:function(t,n){var r=arguments.length<3?void 0:o(arguments[2]),e=u(i(n),r,!1);if(void 0===e||!e.delete(t))return!1;if(e.size)return!0;var c=a.get(n);return c.delete(r),!!c.size||a.delete(n)}})},function(t,n,r){var e=r(28),i=r(1),o=r(17),u=e.has,a=e.get,c=e.key,f=function(t,n,r){if(u(t,n,r))return a(t,n,r);var e=o(n);return null!==e?f(t,e,r):void 0};e.exp({getMetadata:function(t,n){return f(t,i(n),arguments.length<3?void 0:c(arguments[2]))}})},function(t,n,r){var e=r(119),i=r(128),o=r(28),u=r(1),a=r(17),c=o.keys,f=o.key,s=function(t,n){var r=c(t,n),o=a(t);if(null===o)return r;var u=s(o,n);return u.length?r.length?i(new e(r.concat(u))):u:r};o.exp({getMetadataKeys:function(t){return s(u(t),arguments.length<2?void 0:f(arguments[1]))}})},function(t,n,r){var e=r(28),i=r(1),o=e.get,u=e.key;e.exp({getOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(28),i=r(1),o=e.keys,u=e.key;e.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,n,r){var e=r(28),i=r(1),o=r(17),u=e.has,a=e.key,c=function(t,n,r){if(u(t,n,r))return!0;var e=o(n);return null!==e&&c(t,e,r)};e.exp({hasMetadata:function(t,n){return c(t,i(n),arguments.length<3?void 0:a(arguments[2]))}})},function(t,n,r){var e=r(28),i=r(1),o=e.has,u=e.key;e.exp({hasOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(28),i=r(1),o=r(10),u=e.key,a=e.set;e.exp({metadata:function(t,n){return function(r,e){a(t,n,(void 0!==e?i:o)(r),u(e))}}})},function(t,n,r){var e=r(0),i=r(89)(),o=r(2).process,u="process"==r(19)(o);e(e.G,{asap:function(t){var n=u&&o.domain;i(n?n.bind(t):t)}})},function(t,n,r){"use strict";var e=r(0),i=r(2),o=r(21),u=r(89)(),a=r(5)("observable"),c=r(10),f=r(1),s=r(40),l=r(42),h=r(12),d=r(41),v=d.RETURN,p=function(t){return null==t?void 0:c(t)},y=function(t){var n=t._c;n&&(t._c=void 0,n())},g=function(t){return void 0===t._o},m=function(t){g(t)||(t._o=void 0,y(t))},b=function(t,n){f(t),this._c=void 0,this._o=t,t=new M(this);try{var r=n(t),e=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){e.unsubscribe()}:c(r),this._c=r)}catch(n){return void t.error(n)}g(this)&&y(this)};b.prototype=l({},{unsubscribe:function(){m(this)}});var M=function(t){this._s=t};M.prototype=l({},{next:function(t){var n=this._s;if(!g(n)){var r=n._o;try{var e=p(r.next);if(e)return e.call(r,t)}catch(t){try{m(n)}finally{throw t}}}},error:function(t){var n=this._s;if(g(n))throw t;var r=n._o;n._o=void 0;try{var e=p(r.error);if(!e)throw t;t=e.call(r,t)}catch(t){try{y(n)}finally{throw t}}return y(n),t},complete:function(t){var n=this._s;if(!g(n)){var r=n._o;n._o=void 0;try{var e=p(r.complete);t=e?e.call(r,t):void 0}catch(t){try{y(n)}finally{throw t}}return y(n),t}}});var w=function(t){s(this,w,"Observable","_f")._f=c(t)};l(w.prototype,{subscribe:function(t){return new b(t,this._f)},forEach:function(t){var n=this;return new(o.Promise||i.Promise)(function(r,e){c(t);var i=n.subscribe({next:function(n){try{return t(n)}catch(t){e(t),i.unsubscribe()}},error:e,complete:r})})}}),l(w,{from:function(t){var n="function"==typeof this?this:w,r=p(f(t)[a]);if(r){var e=f(r.call(t));return e.constructor===n?e:new n(function(t){return e.subscribe(t)})}return new n(function(n){var r=!1;return u(function(){if(!r){try{if(d(t,!1,function(t){if(n.next(t),r)return v})===v)return}catch(t){if(r)throw t;return void n.error(t)}n.complete()}}),function(){r=!0}})},of:function(){for(var t=0,n=arguments.length,r=new Array(n);t<n;)r[t]=arguments[t++];return new("function"==typeof this?this:w)(function(t){var n=!1;return u(function(){if(!n){for(var e=0;e<r.length;++e)if(t.next(r[e]),n)return;t.complete()}}),function(){n=!0}})}}),h(w.prototype,a,function(){return this}),e(e.G,{Observable:w}),r(39)("Observable")},function(t,n,r){var e=r(2),i=r(0),o=r(92),u=[].slice,a=/MSIE .\./.test(o),c=function(t){return function(n,r){var e=arguments.length>2,i=!!e&&u.call(arguments,2);return t(e?function(){("function"==typeof n?n:Function(n)).apply(this,i)}:n,r)}};i(i.G+i.B+i.F*a,{setTimeout:c(e.setTimeout),setInterval:c(e.setInterval)})},function(t,n,r){var e=r(0),i=r(88);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,r){for(var e=r(87),i=r(35),o=r(13),u=r(2),a=r(12),c=r(46),f=r(5),s=f("iterator"),l=f("toStringTag"),h=c.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},v=i(d),p=0;p<v.length;p++){var y,g=v[p],m=d[g],b=u[g],M=b&&b.prototype;if(M&&(M[s]||a(M,s,h),M[l]||a(M,l,g),c[g]=h,m))for(y in e)M[y]||o(M,y,e[y],!0)}},function(t,n,r){(function(n){!function(n){"use strict";var r,e=Object.prototype,i=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",f="object"==typeof t,s=n.regeneratorRuntime;if(s)f&&(t.exports=s);else{(s=n.regeneratorRuntime=f?t.exports:{}).wrap=M;var l="suspendedStart",h="suspendedYield",d="executing",v="completed",p={},y={};y[u]=function(){return this};var g=Object.getPrototypeOf,m=g&&g(g(L([])));m&&m!==e&&i.call(m,u)&&(y=m);var b=_.prototype=x.prototype=Object.create(y);S.prototype=b.constructor=_,_.constructor=S,_[c]=S.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===S||"GeneratorFunction"===(n.displayName||n.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(b),t},s.awrap=function(t){return{__await:t}},E(A.prototype),A.prototype[a]=function(){return this},s.AsyncIterator=A,s.async=function(t,n,r,e){var i=new A(M(t,n,r,e));return s.isGeneratorFunction(n)?i:i.next().then(function(t){return t.done?t.value:i.next()})},E(b),b[c]="Generator",b[u]=function(){return this},b.toString=function(){return"[object Generator]"},s.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var e=n.pop();if(e in t)return r.value=e,r.done=!1,r}return r.done=!0,r}},s.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function e(e,i){return a.type="throw",a.arg=t,n.next=e,i&&(n.method="next",n.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],a=u.completion;if("root"===u.tryLoc)return e("end");if(u.tryLoc<=this.prev){var c=i.call(u,"catchLoc"),f=i.call(u,"finallyLoc");if(c&&f){if(this.prev<u.catchLoc)return e(u.catchLoc,!0);if(this.prev<u.finallyLoc)return e(u.finallyLoc)}else if(c){if(this.prev<u.catchLoc)return e(u.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return e(u.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&i.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),p},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:L(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=r),p}}}function M(t,n,r,e){var i,o,u,a,c=n&&n.prototype instanceof x?n:x,f=Object.create(c.prototype),s=new T(e||[]);return f._invoke=(i=t,o=r,u=s,a=l,function(t,n){if(a===d)throw new Error("Generator is already running");if(a===v){if("throw"===t)throw n;return R()}for(u.method=t,u.arg=n;;){var r=u.delegate;if(r){var e=P(r,u);if(e){if(e===p)continue;return e}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(a===l)throw a=v,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);a=d;var c=w(i,o,u);if("normal"===c.type){if(a=u.done?v:h,c.arg===p)continue;return{value:c.arg,done:u.done}}"throw"===c.type&&(a=v,u.method="throw",u.arg=c.arg)}}),f}function w(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}function x(){}function S(){}function _(){}function E(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function A(t){function r(n,e,o,u){var a=w(t[n],t,e);if("throw"!==a.type){var c=a.arg,f=c.value;return f&&"object"==typeof f&&i.call(f,"__await")?Promise.resolve(f.__await).then(function(t){r("next",t,o,u)},function(t){r("throw",t,o,u)}):Promise.resolve(f).then(function(t){c.value=t,o(c)},u)}u(a.arg)}var e;"object"==typeof n.process&&n.process.domain&&(r=n.process.domain.bind(r)),this._invoke=function(t,n){function i(){return new Promise(function(e,i){r(t,n,e,i)})}return e=e?e.then(i,i):i()}}function P(t,n){var e=t.iterator[n.method];if(e===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=r,P(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=w(e,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=r),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function I(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function O(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function L(t){if(t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,o=function n(){for(;++e<t.length;)if(i.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=r,n.done=!0,n};return o.next=o}}return{next:R}}function R(){return{value:r,done:!0}}}("object"==typeof n?n:"object"==typeof window?window:"object"==typeof self?self:this)}).call(n,r(95))},function(t,n,r){r(337),t.exports=r(21).RegExp.escape},function(t,n,r){var e=r(0),i=r(338)(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(t){return i(t)}})},function(t,n){t.exports=function(t,n){var r=n===Object(n)?function(t){return n[t]}:n;return function(n){return String(n).replace(t,r)}}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var r=[],e=!0,i=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(e=(u=a.next()).done)&&(r.push(u.value),!n||r.length!==n);e=!0);}catch(t){i=!0,o=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw o}}return r}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=r(93),o=g(r(342)),u=g(r(343)),a=g(r(348)),c=g(r(349)),f=g(r(350)),s=r(48),l=g(r(43)),h=r(359),d=g(r(130)),v=r(132),p=r(94),y=g(r(360));function g(t){return t&&t.__esModule?t:{default:t}}function m(t){var n,r,g=t.document.getElementById("canvas"),m=new(t.AudioContext||t.webkitAudioContext);(0,h.allKeys)({tiles:(r="./gfx/tiles.png",new Promise(function(t,n){var e=new Image;e.addEventListener("load",function(){return t(e)}),e.addEventListener("error",function(t){return n(t)}),e.src=r})),sounds:(n=["coin","explode","thud","push"],(0,h.allKeys)(n.reduce(function(n,r){return n[r]=(0,v.loadSound)(t,m,"./snd/"+r+".mp3"),n},{})))}).then(function(n){var r=n.tiles,h=n.sounds;return function(t){var n=t.window,r=t.canvas,h=t.tiles,v=t.sounds,g=[],m=(0,l.default)(NaN),b=new o.default,M=new o.default,w=new u.default(16,11);(0,d.default)({board:w,random:b,now:n.performance.now()});var x=new c.default,S="game";r.width=(w.width-1)*s.TILE_SIZE,r.height=(w.height-1)*s.TILE_SIZE;var _=r.getContext("webgl"),E=null;_?E=new f.default:(E=new a.default,_=r.getContext("2d"));E.setup({board:w,ctx:_,tiles:h,window:n}),n.document.body.addEventListener("keydown",function(t){t.repeat||g.push(t),t.ctrlKey||t.altKey||t.metaKey||t.preventDefault()}),n.addEventListener("mousemove",function(t){g.push(t),m=(0,l.default)(t.clientX,t.clientY)}),n.addEventListener("mousedown",function(t){return g.push(t)}),n.addEventListener("contextmenu",function(t){return t.preventDefault(),t.stopPropagation(),!1}),r.addEventListener("touchstart",function(t){g.push(t)},{passive:!1}),n.addEventListener("touchmove",function(t){return t.preventDefault()},{passive:!1}),n.document.getElementById("wait").addEventListener("click",function(){return g.push({type:"keydown",code:"KeyZ"})},!0),n.document.getElementById("die").addEventListener("click",function(){return g.push({type:"keydown",code:"KeyK"})},!0),n.document.getElementById("bomb").addEventListener("click",function(){return g.push({type:"keydown",code:"Space"})},!0);var A={KeyE:function(){return S="game"===S?"edit":"game"},Escape:function(){return 0}},P=n.document.getElementById("coins");setInterval(function(){var t=(0,p.partition)(g,function(t){var n=t.code;return A[n]}),o=e(t,2),u=o[0],a=o[1];a.forEach(function(t){var n=t.code;return A[n]()}),{game:i.game,edit:i.edit}[S]({board:w,editor:x,random:b,now:n.performance.now()},{events:u,canvas:r,coins:P,window:n,sounds:v}),g=[]},1e3/60),function t(){E.newFrame({board:w,mode:S}),(0,y.default)({board:w,editor:x,mode:S,random:M,now:n.performance.now()},{ctx:E,tiles:h,mousePos:m,window:n}),E.endFrame(),n.requestAnimationFrame(t)}()}({window:t,canvas:g,audio:m,sounds:h,tiles:r})},function(n){return t.alert(n)})}n.default=m,window.addEventListener("DOMContentLoaded",function(){return m(window)})},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e,i=r(341),o=(e=i)&&e.__esModule?e:{default:e};n.default=function(t,n,r){var e=r.neighbors,i=r.passable,u=r.heuristic,a=r.cost,c=new Map,f=new o.default([],function(t,n){var r=c.get(t),e=c.get(n);return r>e?1:r<e?-1:0}),s=new Map,l=new Map,h=null,d=null;l.set(t,0),c.set(t,0),f.enqueue(t),i=i||function(){return!0},u=u||function(){return 0},a=a||function(){return 1};for(;f.length;){if((h=f.dequeue())===n)return p(s,h);d=l.get(h),e(h).map(v)}return[];function v(t){var r=d+a(h,t);if(i(t)&&(!l.has(t)||r<l.get(t))){var e=r+u(n,t);l.set(t,r),c.set(t,e),f.enqueue(t),s.set(t,h)}}function p(t,n){if(!n)return[];var r=t.get(n),e=p(t,r);return[].concat(function(t){if(Array.isArray(t)){for(var n=0,r=Array(t.length);n<t.length;n++)r[n]=t[n];return r}return Array.from(t)}(e),[n])}}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var r=[],e=!0,i=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(e=(u=a.next()).done)&&(r.push(u.value),!n||r.length!==n);e=!0);}catch(t){i=!0,o=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw o}}return r}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}}();var o=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.defaultCmp;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._cmp=r,this._heap=[],this.enqueue.apply(this,function(t){if(Array.isArray(t)){for(var n=0,r=Array(t.length);n<t.length;n++)r[n]=t[n];return r}return Array.from(t)}(n))}return i(t,[{key:Symbol.iterator,value:function(){return this.values()}},{key:"clear",value:function(){var t=this.length;return this._heap=[],t}},{key:"clone",value:function(){return this.constructor[Symbol.species]?new this.constructor[Symbol.species](this._heap,this._cmp):new this.constructor(this._heap,this._cmp)}},{key:"concat",value:function(){var t;return(t=Array.from(this)).concat.apply(t,arguments)}},{key:"dequeue",value:function(){if(this._heap.length<2)return this._heap.pop();var t=this._heap[0];this._heap[0]=this._heap.pop();for(var n,r=0,e=1,i=2;e<this._heap.length&&(n=this._minInHeap(r,e,i<this._heap.length?i:void 0))!==r;i=(e=2*(r=n)+1)+1)this._swapInHeap(r,n);return t}},{key:"enqueue",value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var e=!0,i=!1,o=void 0;try{for(var u,a=n[Symbol.iterator]();!(e=(u=a.next()).done);e=!0){var c=u.value;this._heap.push(c);for(var f=this._heap.length-1,s=Math.floor((f-1)/2);f>0&&this._cmpInHeap(f,s)<0;f=s,s=Math.floor((s-1)/2))this._swapInHeap(f,s)}}catch(t){i=!0,o=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw o}}return this.length}},{key:"entries",value:regeneratorRuntime.mark(function t(){var n,r,e,i,o,u,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=0,r=!0,e=!1,i=void 0,t.prev=4,o=this[Symbol.iterator]();case 6:if(r=(u=o.next()).done){t.next=13;break}return a=u.value,t.next=10,[n++,a];case 10:r=!0,t.next=6;break;case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(4),e=!0,i=t.t0;case 19:t.prev=19,t.prev=20,!r&&o.return&&o.return();case 22:if(t.prev=22,!e){t.next=25;break}throw i;case 25:return t.finish(22);case 26:return t.finish(19);case 27:case"end":return t.stop()}},t,this,[[4,15,19,27],[20,,22,26]])})},{key:"every",value:function(t,n){var r=!0,i=!1,o=void 0;try{for(var u,a=this.entries()[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var c=u.value,f=e(c,2),s=f[0],l=f[1];if(!t.call(n,l,s,this))return!1}}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return!0}},{key:"find",value:function(t,n){var r=!0,i=!1,o=void 0;try{for(var u,a=this.entries()[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var c=u.value,f=e(c,2),s=f[0],l=f[1];if(t.call(n,l,s,this))return l}}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}}},{key:"findIndex",value:function(t,n){var r=!0,i=!1,o=void 0;try{for(var u,a=this.entries()[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var c=u.value,f=e(c,2),s=f[0],l=f[1];if(t.call(n,l,s,this))return s}}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return-1}},{key:"forEach",value:function(t,n){var r=!0,i=!1,o=void 0;try{for(var u,a=this.entries()[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var c=u.value,f=e(c,2),s=f[0],l=f[1];t.call(n,l,s,this)}}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}}},{key:"includes",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===n?this._heap.includes(t):(n<0&&(n=this.length+n),Number.isNaN(t)?this.some(function(t,r){return r>=n&&Number.isNaN(t)}):this.some(function(r,e){return e>=n&&r===t}))}},{key:"indexOf",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n<0&&(n=this.length+n),this.findIndex(function(r,e){return e>=n&&r===t})}},{key:"filter",value:function(t,n){var r=this.constructor[Symbol.species]?new this.constructor[Symbol.species]([],this._cmp):new this.constructor([],this._cmp),i=!0,o=!1,u=void 0;try{for(var a,c=this.entries()[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var f=a.value,s=e(f,2),l=s[0],h=s[1];t.call(n,h,l,this)&&r.enqueue(h)}}catch(t){o=!0,u=t}finally{try{!i&&c.return&&c.return()}finally{if(o)throw u}}return r}},{key:"join",value:function(){var t;return(t=Array.from(this)).join.apply(t,arguments)}},{key:"lastIndexOf",value:function(){var t;return(t=Array.from(this)).lastIndexOf.apply(t,arguments)}},{key:"map",value:function(t,n){var r=[],i=!0,o=!1,u=void 0;try{for(var a,c=this.entries()[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var f=a.value,s=e(f,2),l=s[0],h=s[1];r.push(t.call(n,h,l,this))}}catch(t){o=!0,u=t}finally{try{!i&&c.return&&c.return()}finally{if(o)throw u}}return r}},{key:"peek",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===t?this._heap[0]:(t<0&&(t=this.length+t),this.find(function(n,r){return r===t}))}},{key:"reduce",value:function(t,n){var r=!0,i=!1,o=void 0;try{for(var u,a=this.entries()[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var c=u.value,f=e(c,2),s=f[0];n=t(n,f[1],s,this)}}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}},{key:"reduceRight",value:function(t,n){var r=!0,i=!1,o=void 0;try{for(var u,a=Array.from(this.entries()).reverse()[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var c=u.value,f=e(c,2),s=f[0];n=t(n,f[1],s,this)}}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}},{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return t<0&&(t=this.length+t),n<0&&(n=this.length+n),this.filter(function(r,e){return e>=t&&e<n})}},{key:"some",value:function(t,n){var r=!0,i=!1,o=void 0;try{for(var u,a=this.entries()[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var c=u.value,f=e(c,2),s=f[0],l=f[1];if(t.call(n,l,s,this))return!0}}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return!1}},{key:"toJSON",value:function(){return Array.from(this)}},{key:"toLocaleString",value:function(){return Array.from(this).toLocaleString()}},{key:"toString",value:function(){return Array.from(this).toString()}},{key:"values",value:regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=this.clone();case 1:if(!n.length){t.next=6;break}return t.next=4,n.dequeue();case 4:t.next=1;break;case 6:case"end":return t.stop()}},t,this)})},{key:"_cmpInHeap",value:function(t,n){return this._cmp(this._heap[t],this._heap[n])}},{key:"_minInHeap",value:function(t,n,r){var e=this._cmpInHeap(t,n)>0?n:t;return void 0===r?e:this._cmpInHeap(e,r)>0?r:e}},{key:"_swapInHeap",value:function(t,n){var r=this._heap[t];this._heap[t]=this._heap[n],this._heap[n]=r}},{key:"length",get:function(){return this._heap.length}}]),t}();n.default=o,o.defaultCmp=function(t,n){return t>n?1:t<n?-1:0}},function(t,n,r){"use strict";function e(){return function(t){var n=0,r=0,e=0,i=1;0==t.length&&(t=[+new Date]);var o,u,a=(o=4022871197,(u=function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(o+=t.charCodeAt(n));r-=o=r>>>0,o=(r*=o)>>>0,o+=4294967296*(r-=o)}return 2.3283064365386963e-10*(o>>>0)}).version="Mash 0.9",u);n=a(" "),r=a(" "),e=a(" ");for(var c=0;c<t.length;c++)(n-=a(t[c]))<0&&(n+=1),(r-=a(t[c]))<0&&(r+=1),(e-=a(t[c]))<0&&(e+=1);a=null;var f=function(){var t=2091639*n+2.3283064365386963e-10*i;return n=r,r=e,e=t-(i=0|t)};return f.uint32=function(){return 4294967296*f()},f.fract53=function(){return f()+1.1102230246251565e-16*(2097152*f()|0)},f.version="Alea 0.9",f.args=t,f.exportState=function(){return[n,r,e,i]},f.importState=function(t){n=+t[0]||0,r=+t[1]||0,e=+t[2]||0,i=+t[3]||0},f}(Array.prototype.slice.call(arguments))}Object.defineProperty(n,"__esModule",{value:!0}),n.default=e,e.importState=function(t){var n=new e;return n.importState(t),n}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e,i=function(){return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var r=[],e=!0,i=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(e=(u=a.next()).done)&&(r.push(u.value),!n||r.length!==n);e=!0);}catch(t){i=!0,o=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw o}}return r}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}}(),u=r(48),a=r(344),c=r(43),f=(e=c)&&e.__esModule?e:{default:e},s=r(94);function l(t){if(Array.isArray(t)){for(var n=0,r=Array(t.length);n<t.length;n++)r[n]=t[n];return r}return Array.from(t)}var h=function(){function t(n,r){var e=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=n,this.height=r,this.cells=[].concat(l(Array(n*r))).map(function(t,n){return{pos:e.pos(n),tile:u.TILES[0],sprites:[]}}),this.sprites=new Map(u.SPRITES.map(function(t){return[t,[]]})),this.fovMap=[].concat(l(Array(2*r+1))).map(function(){return Array(2*n+1).fill(!1)}),this.fov=new a.PermissiveFov(2*n+1,2*r+1,function(t,n){return e.fovMap[n][t]})}return o(t,[{key:"pos",value:function(t){return(0,f.default)(t%this.width,Math.floor(t/this.width))}},{key:"index",value:function(t){var n=t.x;return t.y*this.width+n}},{key:"cell",value:function(t){return this.valid(t)?this.cells[this.index(t)]:null}},{key:"createSprite",value:function(t,n,r){var e=Object.assign({cell:t,type:n},r);return t.sprites.push(e),this.sprites.get(n).push(e),e}},{key:"moveSprite",value:function(t,n){(0,s.remove)(t.cell.sprites,t),t.cell=n,n.sprites.push(t)}},{key:"deleteSprite",value:function(t){(0,s.remove)(this.sprites.get(t.type),t),(0,s.remove)(t.cell.sprites,t)}},{key:"player",value:function(){return(this.sprites.get("player")||[])[0]}},{key:"valid",value:function(t){var n=t.x,r=t.y;return n>=0&&r>=0&&n<this.width&&r<this.height}},{key:"recomputeFOV",value:function(t){var n=this;this.fovMap.forEach(function(t){return t.fill(!1)});for(var r=0;r<=this.height;r+=.5)for(var e=0;e<=this.width;e+=.5){var i=[(0,f.default)(e,r)];e%1==0&&i.push((0,f.default)(e-1,r)),r%1==0&&i.push((0,f.default)(e,r-1)),e%1==0&&r%1==0&&i.push((0,f.default)(e-1,r-1)),this.fovMap[2*r][2*e]=i.reduce(function(r,e){return r&&t(n.cell(e.map(function(t){return Math.floor(t)})))},!0)}}},{key:"toJSON",value:function(){return{version:"1.0",width:this.width,height:this.height,cells:this.cells.map(function(t){return u.TILES.indexOf(t.tile)}),sprites:[].concat(l(this.sprites)).reduce(function(t,n){return[].concat(l(t),l(n.map(function(t){var n=t.type,r=t.cell.pos;return[r.x,r.y,u.SPRITES.indexOf(n)]})))},[])}}},{key:"fromJSON",value:function(t){var n=this,r=t.width,e=t.height,o=t.cells,a=t.sprites;this.width=r,this.height=e,this.fov=[].concat(l(Array(2*e+1))).map(function(){return Array(2*r+1).fill(0)}),this.cells=o.map(function(t,r){return{pos:n.pos(r),tile:u.TILES[t],sprites:[]}}),this.sprites=new Map(u.SPRITES.map(function(t){return[t,[]]})),a.forEach(function(t){var r=i(t,3),e=r[0],o=r[1],a=r[2];return n.createSprite(n.cell((0,f.default)(e,o)),u.SPRITES[a])})}},{key:"neighbors",value:function(t){var n=this,r=t.pos,e=[r.add((0,f.default)(0,-1)),r.add((0,f.default)(1,0)),r.add((0,f.default)(0,1)),r.add((0,f.default)(-1,0))];for(var i in e)this.valid(e[i])||delete e[i];return e.map(function(t){return n.cell(t)})}}]),t}();n.default=h},function(t,n,r){var e=r(345).Line,i=r(346).View,o=r(347).ViewBump,u=function(t,n,r){this._mapWidth=t,this._mapHeight=n,this._isTransparent=r};function a(t,n,r,o,u){var a,f,s,l,h,d,v=[];for(h=new e(0,1,o,0),d=new e(1,0,0,u),v.push(new i(h,d)),0,l=o+u,f=1;f<=l&&v.length;++f)for(a=f<u?f:u,s=0>f-o?0:f-o;s<=a&&0<v.length;++s)c(t,f-s,s,n,r,0,v)}function c(t,n,r,e,i,o,u){for(var a,c,h,d,v,p,y,g=[n,r+1],m=[n+1,r];o<u.length&&u[o].steepLine.isBelowOrCollinear(m[0],m[1]);++o);o==u.length||u[o].shallowLine.isAboveOrCollinear(g[0],g[1])||(h=n*e,d=r*i,v=[t.startX+h,t.startY+d],t.visited[v[0]]&&t.visited[v[0]][v[1]]||(t.visited[v[0]]=t.visited[v[0]]||[],t.visited[v[0]][v[1]]=1,t.setVisible(v[0],v[1])),t.isTransparent(v[0],v[1])||(p=u[o].shallowLine.isAbove(m[0],m[1]),y=u[o].steepLine.isBelow(g[0],g[1]),p&&y?u.splice(o,1):p?(f(g[0],g[1],u,o),l(u,o)):y?(s(m[0],m[1],u,o),l(u,o)):(a=o,c=++o,u.splice(a,0,u[a].clone()),s(m[0],m[1],u,a),l(u,a)||--c,f(g[0],g[1],u,c),l(u,c))))}function f(t,n,r,e){r[e].shallowLine.setFarPoint(t,n),r[e].shallowBump=new o(t,n,r[e].shallowBump);for(var i=r[e].steepBump;i;i=i.parent)r[e].shallowLine.isAbove(i.x,i.y)&&r[e].shallowLine.setNearPoint(i.x,i.y)}function s(t,n,r,e){r[e].steepLine.setFarPoint(t,n),r[e].steepBump=new o(t,n,r[e].steepBump);for(var i=r[e].shallowBump;i;i=i.parent)r[e].steepLine.isBelow(i.x,i.y)&&r[e].steepLine.setNearPoint(i.x,i.y)}function l(t,n){return!t[n].shallowLine.isLineCollinear(t[n].steepLine)||!t[n].shallowLine.isCollinear(0,1)&&!t[n].shallowLine.isCollinear(1,0)||(t.splice(n,1),!1)}u.prototype.compute=function(t,n,r,e){var i,o,u,c,f={setVisible:e,isTransparent:this._isTransparent,startX:t,startY:n,radius:r,visited:[]};f.setVisible(t,n),f.visited[t]=[],f.visited[t][n]=1,i=t<r?t:r,o=this._mapWidth-t<=r?this._mapWidth-t-1:r,u=n<r?n:r,a(f,1,1,o,c=this._mapHeight-n<=r?this._mapHeight-n-1:r),a(f,1,-1,o,u),a(f,-1,-1,i,u),a(f,-1,1,i,c)},u.prototype.setMapDimensions=function(t,n){this._mapWidth=t,this._mapHeight=n},u.prototype.setIsTransparent=function(t){this._isTransparent=t},t.exports.PermissiveFov=u},function(t,n){var r=function(t,n,r,e){this._nearX=t,this._nearY=n,this._farX=r,this._farY=e,this._deltaX=this._farX-this._nearX,this._deltaY=this._farY-this._nearY};r.prototype.clone=function(){return new r(this._nearX,this._nearY,this._farX,this._farY)},r.prototype.setNearPoint=function(t,n){this._nearX=t,this._nearY=n,this._deltaX=this._farX-this._nearX,this._deltaY=this._farY-this._nearY},r.prototype.setFarPoint=function(t,n){this._farX=t,this._farY=n,this._deltaX=this._farX-this._nearX,this._deltaY=this._farY-this._nearY},r.prototype.isBelow=function(t,n){return this._relativeSlope(t,n)>0},r.prototype.isBelowOrCollinear=function(t,n){return this._relativeSlope(t,n)>=0},r.prototype.isAbove=function(t,n){return this._relativeSlope(t,n)<0},r.prototype.isAboveOrCollinear=function(t,n){return this._relativeSlope(t,n)<=0},r.prototype.isCollinear=function(t,n){return 0==this._relativeSlope(t,n)},r.prototype.isLineCollinear=function(t){return this.isCollinear(t._nearX,t._nearY)&&this.isCollinear(t._farX,t._farY)},r.prototype._relativeSlope=function(t,n){return this._deltaY*(this._farX-t)-this._deltaX*(this._farY-n)},t.exports.Line=r},function(t,n){var r=function(t,n){this.shallowLine=t,this.steepLine=n,this.shallowBump=null,this.steepBump=null};r.prototype.clone=function(){var t=new r(this.shallowLine.clone(),this.steepLine.clone());return t.shallowBump=this.shallowBump?this.shallowBump.clone():null,t.steepBump=this.steepBump?this.steepBump.clone():null,t},t.exports.View=r},function(t,n){var r=function(t,n,r){this.x=t,this.y=n,this.parent=r};r.prototype.clone=function(){return new r(this.x,this.y,this.parent?this.parent.clone():null)},t.exports.ViewBump=r},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e,i=function(){function t(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}}(),o=r(48),u=r(43),a=(e=u)&&e.__esModule?e:{default:e};function c(t){if(Array.isArray(t)){for(var n=0,r=Array(t.length);n<t.length;n++)r[n]=t[n];return r}return Array.from(t)}var f=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.alpha=1,this.z=0}return i(t,[{key:"_identity",value:function(){var t=this.ctx;t.setTransform(1,0,0,1,0,0),"edit"===this.mode?t.translate(-o.TILE_SIZE/2,-o.TILE_SIZE/2):"game"===this.mode&&t.translate(-o.TILE_SIZE/2,0)}},{key:"setup",value:function(t){var n=t.ctx,r=t.tiles;this.quads=new Map,this.ctx=n,this.canvas=n.canvas,this.tiles=r}},{key:"drawQuad",value:function(t,n){var r=this,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.alpha,u=void 0===i?this.alpha:i,f=e.transforms,s=void 0===f?[]:f,l=e.size,h=void 0===l?(0,a.default)(1):l,d=e.z,v=void 0===d?this.z:d,p=this.ctx;this.quads.set(v,this.quads.get(v)||[]),this.quads.get(v).push(function(){var e=p.globalAlpha;p.globalAlpha*=u,s.length&&(p.translate.apply(p,c(n.add(h.mult(.5)).mult(o.TILE_SIZE).array())),n=h.mult(-.5),s.forEach(function(t){return{rotate:function(){return p.rotate(Math.PI/2)},flipX:function(){return p.scale(-1,1)},flipY:function(){return p.scale(1,-1)}}[t]()})),p.drawImage.apply(p,[r.tiles].concat(c([t%(o.TEX_SIZE.x/h.x)*h.x,Math.floor(t/(o.TEX_SIZE.y/h.y))*h.y,h.x,h.y,n.x,n.y,h.x,h.y].map(function(t){return t*o.TILE_SIZE})))),s.length&&r._identity(),p.globalAlpha=e})}},{key:"newFrame",value:function(t){var n=t.mode;this.mode=n,this._identity()}},{key:"endFrame",value:function(){this.quads.get(-1).forEach(function(t){return t()}),this.quads.get(0).forEach(function(t){return t()}),this.quads.get(1).forEach(function(t){return t()}),this.quads.clear(),this.alpha=1,this.z=0}}]),t}();n.default=f},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function t(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}}(),i=r(48);var o=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.mode="fg",this.spriteIndex=0,this.tileIndex=0}return e(t,[{key:"toggleMode",value:function(){this.mode="fg"===this.mode?"bg":"fg"}},{key:"prev",value:function(){"fg"===this.mode?this.spriteIndex=(this.spriteIndex+i.SPRITES.length-1)%i.SPRITES.length:"bg"===this.mode&&(this.tileIndex=(this.tileIndex+i.TILES.length-1)%i.TILES.length)}},{key:"next",value:function(){"fg"===this.mode?this.spriteIndex=(this.spriteIndex+1)%i.SPRITES.length:"bg"===this.mode&&(this.tileIndex=(this.tileIndex+1)%i.TILES.length)}},{key:"sprite",value:function(){return i.SPRITES[this.spriteIndex]}},{key:"tile",value:function(){return i.TILES[this.tileIndex]}}]),t}();n.default=o},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function t(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}}(),i=r(48),o=f(r(351)),u=f(r(43)),a=f(r(352)),c=r(353);function f(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.verts=[],this.tris=0,this.light=[1,1,1,1],this.alpha=1,this.z=0}return e(t,[{key:"drawQuad",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},e=r.light,o=void 0===e?this.light:e,a=r.alpha,c=void 0===a?this.alpha:a,f=r.transforms,s=void 0===f?[]:f,l=r.size,h=void 0===l?(0,u.default)(1):l,d=r.z,v=void 0===d?this.z:d,p=(0,u.default)(t%(i.TEX_SIZE.x/h.x)*h.x,Math.floor(t/(i.TEX_SIZE.y/h.y))*h.y).div(i.TILE_SIZE),y=p.add(h.div(i.TEX_SIZE)),g=s.reduce(function(t,r){return{rotate:function(){return t.push(t.shift())},flipX:function(){return n.reverse()},flipY:function(){var n;return n=[t[1],t[0],t[3],t[2]],t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],n}}[r](),t},[p,(0,u.default)(p.x,y.y),y,(0,u.default)(y.x,p.y)].map(function(t,n){return{x:t.x,y:t.y,l:o[n]}})),m=n.add(h);this.verts.push(n.x,n.y,v,g[0].x,g[0].y,g[0].l,c,n.x,m.y,v,g[1].x,g[1].y,g[1].l,c,m.x,n.y,v,g[3].x,g[3].y,g[3].l,c,n.x,m.y,v,g[1].x,g[1].y,g[1].l,c,m.x,m.y,v,g[2].x,g[2].y,g[2].l,c,m.x,n.y,v,g[3].x,g[3].y,g[3].l,c),this.tris+=2}},{key:"setup",value:function(t){var n=t.board,r=t.ctx,e=t.tiles,f=t.window;this.gl=r,this.canvas=r.canvas;var s=function(t,n,r){var e=t.createShader(n);return t.shaderSource(e,r),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS)?e:(f.alert(t.getShaderInfoLog(e)),null)},l=s(r,r.VERTEX_SHADER,a.default),h=s(r,r.FRAGMENT_SHADER,o.default),d=r.createProgram();r.attachShader(d,l),r.attachShader(d,h),r.linkProgram(d),r.validateProgram(d),r.getProgramParameter(d,r.LINK_STATUS)||f.alert(r.getProgramInfoLog(d)),r.useProgram(d),d.projection=r.getUniformLocation(d,"projection"),d.model=r.getUniformLocation(d,"model"),d.sampler=r.getUniformLocation(d,"sampler"),d.position=r.getAttribLocation(d,"position"),d.extra=r.getAttribLocation(d,"extra"),r.enableVertexAttribArray(d.position),r.enableVertexAttribArray(d.extra);var v=(0,u.default)(n.width,n.height).sub(1),p=v.mult(i.TILE_SIZE);r.viewport(0,0,p.x,p.y);var y=c.mat4.ortho(c.mat4.create(),0,v.x,v.y,0,256,-256);y[6]=-1/(32*i.TILE_SIZE),y[10]=-y[10],r.uniformMatrix4fv(d.projection,!1,y);var g=r.createTexture();r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,g),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.uniform1i(d.sampler,0);var m=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,m),r.bufferData(r.ARRAY_BUFFER,1048576,r.DYNAMIC_DRAW),r.vertexAttribPointer(d.position,3,r.FLOAT,!1,28,0),r.vertexAttribPointer(d.extra,4,r.FLOAT,!1,28,12),r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL),r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.clearColor(0,0,.1,1),this.buffer=m,this.program=d,this.texture=g}},{key:"newFrame",value:function(t){var n=t.mode,r=this.gl;if(r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),n!==this.mode){this.mode=n;var e=c.mat4.create();"edit"===n?c.mat4.translate(e,e,[-.5,-.5,0]):"game"===n&&c.mat4.translate(e,e,[-.5,0,0]),r.uniformMatrix4fv(this.program.model,!1,e)}}},{key:"endFrame",value:function(){var t=this.gl;t.bufferSubData(t.ARRAY_BUFFER,0,new Float32Array(this.verts)),t.drawArrays(t.TRIANGLES,0,3*this.tris),this.verts=[],this.light=[1,1,1,1],this.alpha=1,this.z=0,this.tris=0}}]),t}();n.default=s},function(t,n){t.exports="precision mediump float;\n\nuniform sampler2D sampler;\nvarying vec4 texCoord;\n\nvoid main(void) {\n  vec4 color = texture2D(sampler, texCoord.st);\n  color.a *= texCoord.q;\n  if (color.a == 0.0) discard;\n  float light = texCoord.p;\n  color = vec4(color.rgb * light, color.a);\n  gl_FragColor = color;\n}\n"},function(t,n){t.exports="attribute vec3 position;\nattribute vec4 extra;\n\nuniform mat4 projection;\nuniform mat4 model;\nvarying vec4 texCoord;\n\nvoid main(void) {\n  gl_Position = projection * model * vec4(position, 1.0);\n  texCoord = extra;\n}\n"},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(29),i=r(354),o=r(355),u=r(133),a=r(356),c=r(357),f=r(358),s=r(134),l=r(135);r.d(n,"glMatrix",function(){return e}),r.d(n,"mat2",function(){return i}),r.d(n,"mat2d",function(){return o}),r.d(n,"mat3",function(){return u}),r.d(n,"mat4",function(){return a}),r.d(n,"quat",function(){return c}),r.d(n,"vec2",function(){return f}),r.d(n,"vec3",function(){return s}),r.d(n,"vec4",function(){return l})},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){let t=new e.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.clone=function(t){let n=new e.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.fromValues=function(t,n,r,i){let o=new e.ARRAY_TYPE(4);return o[0]=t,o[1]=n,o[2]=r,o[3]=i,o},n.set=function(t,n,r,e,i){return t[0]=n,t[1]=r,t[2]=e,t[3]=i,t},n.transpose=function(t,n){if(t===n){let r=n[1];t[1]=n[2],t[2]=r}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t},n.invert=function(t,n){let r=n[0],e=n[1],i=n[2],o=n[3],u=r*o-i*e;if(!u)return null;return u=1/u,t[0]=o*u,t[1]=-e*u,t[2]=-i*u,t[3]=r*u,t},n.adjoint=function(t,n){let r=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=r,t},n.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},n.multiply=i,n.rotate=function(t,n,r){let e=n[0],i=n[1],o=n[2],u=n[3],a=Math.sin(r),c=Math.cos(r);return t[0]=e*c+o*a,t[1]=i*c+u*a,t[2]=e*-a+o*c,t[3]=i*-a+u*c,t},n.scale=function(t,n,r){let e=n[0],i=n[1],o=n[2],u=n[3],a=r[0],c=r[1];return t[0]=e*a,t[1]=i*a,t[2]=o*c,t[3]=u*c,t},n.fromRotation=function(t,n){let r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=-r,t[3]=e,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t},n.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},n.LDU=function(t,n,r,e){return t[2]=e[2]/e[0],r[0]=e[0],r[1]=e[1],r[3]=e[3]-t[2]*r[1],[t,n,r]},n.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t},n.subtract=o,n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},n.equals=function(t,n){let r=t[0],i=t[1],o=t[2],u=t[3],a=n[0],c=n[1],f=n[2],s=n[3];return Math.abs(r-a)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-c)<=e.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(o-f)<=e.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(u-s)<=e.EPSILON*Math.max(1,Math.abs(u),Math.abs(s))},n.multiplyScalar=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t},n.multiplyScalarAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t};var e=r(29);function i(t,n,r){let e=n[0],i=n[1],o=n[2],u=n[3],a=r[0],c=r[1],f=r[2],s=r[3];return t[0]=e*a+o*c,t[1]=i*a+u*c,t[2]=e*f+o*s,t[3]=i*f+u*s,t}function o(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}const u=i;n.mul=u;const a=o;n.sub=a},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){let t=new e.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.clone=function(t){let n=new e.ARRAY_TYPE(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.fromValues=function(t,n,r,i,o,u){let a=new e.ARRAY_TYPE(6);return a[0]=t,a[1]=n,a[2]=r,a[3]=i,a[4]=o,a[5]=u,a},n.set=function(t,n,r,e,i,o,u){return t[0]=n,t[1]=r,t[2]=e,t[3]=i,t[4]=o,t[5]=u,t},n.invert=function(t,n){let r=n[0],e=n[1],i=n[2],o=n[3],u=n[4],a=n[5],c=r*o-e*i;if(!c)return null;return c=1/c,t[0]=o*c,t[1]=-e*c,t[2]=-i*c,t[3]=r*c,t[4]=(i*a-o*u)*c,t[5]=(e*u-r*a)*c,t},n.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},n.multiply=i,n.rotate=function(t,n,r){let e=n[0],i=n[1],o=n[2],u=n[3],a=n[4],c=n[5],f=Math.sin(r),s=Math.cos(r);return t[0]=e*s+o*f,t[1]=i*s+u*f,t[2]=e*-f+o*s,t[3]=i*-f+u*s,t[4]=a,t[5]=c,t},n.scale=function(t,n,r){let e=n[0],i=n[1],o=n[2],u=n[3],a=n[4],c=n[5],f=r[0],s=r[1];return t[0]=e*f,t[1]=i*f,t[2]=o*s,t[3]=u*s,t[4]=a,t[5]=c,t},n.translate=function(t,n,r){let e=n[0],i=n[1],o=n[2],u=n[3],a=n[4],c=n[5],f=r[0],s=r[1];return t[0]=e,t[1]=i,t[2]=o,t[3]=u,t[4]=e*f+o*s+a,t[5]=i*f+u*s+c,t},n.fromRotation=function(t,n){let r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=-r,t[3]=e,t[4]=0,t[5]=0,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=0,t[5]=0,t},n.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1],t},n.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},n.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t},n.subtract=o,n.multiplyScalar=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t},n.multiplyScalarAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]},n.equals=function(t,n){let r=t[0],i=t[1],o=t[2],u=t[3],a=t[4],c=t[5],f=n[0],s=n[1],l=n[2],h=n[3],d=n[4],v=n[5];return Math.abs(r-f)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-s)<=e.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-l)<=e.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(u-h)<=e.EPSILON*Math.max(1,Math.abs(u),Math.abs(h))&&Math.abs(a-d)<=e.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(c-v)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))};var e=r(29);function i(t,n,r){let e=n[0],i=n[1],o=n[2],u=n[3],a=n[4],c=n[5],f=r[0],s=r[1],l=r[2],h=r[3],d=r[4],v=r[5];return t[0]=e*f+o*s,t[1]=i*f+u*s,t[2]=e*l+o*h,t[3]=i*l+u*h,t[4]=e*d+o*v+a,t[5]=i*d+u*v+c,t}function o(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t}const u=i;n.mul=u;const a=o;n.sub=a},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){let t=new e.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.clone=function(t){let n=new e.ARRAY_TYPE(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},n.fromValues=function(t,n,r,i,o,u,a,c,f,s,l,h,d,v,p,y){let g=new e.ARRAY_TYPE(16);return g[0]=t,g[1]=n,g[2]=r,g[3]=i,g[4]=o,g[5]=u,g[6]=a,g[7]=c,g[8]=f,g[9]=s,g[10]=l,g[11]=h,g[12]=d,g[13]=v,g[14]=p,g[15]=y,g},n.set=function(t,n,r,e,i,o,u,a,c,f,s,l,h,d,v,p,y){return t[0]=n,t[1]=r,t[2]=e,t[3]=i,t[4]=o,t[5]=u,t[6]=a,t[7]=c,t[8]=f,t[9]=s,t[10]=l,t[11]=h,t[12]=d,t[13]=v,t[14]=p,t[15]=y,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.transpose=function(t,n){if(t===n){let r=n[1],e=n[2],i=n[3],o=n[6],u=n[7],a=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=r,t[6]=n[9],t[7]=n[13],t[8]=e,t[9]=o,t[11]=n[14],t[12]=i,t[13]=u,t[14]=a}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},n.invert=function(t,n){let r=n[0],e=n[1],i=n[2],o=n[3],u=n[4],a=n[5],c=n[6],f=n[7],s=n[8],l=n[9],h=n[10],d=n[11],v=n[12],p=n[13],y=n[14],g=n[15],m=r*a-e*u,b=r*c-i*u,M=r*f-o*u,w=e*c-i*a,x=e*f-o*a,S=i*f-o*c,_=s*p-l*v,E=s*y-h*v,A=s*g-d*v,P=l*y-h*p,I=l*g-d*p,O=h*g-d*y,T=m*O-b*I+M*P+w*A-x*E+S*_;if(!T)return null;return T=1/T,t[0]=(a*O-c*I+f*P)*T,t[1]=(i*I-e*O-o*P)*T,t[2]=(p*S-y*x+g*w)*T,t[3]=(h*x-l*S-d*w)*T,t[4]=(c*A-u*O-f*E)*T,t[5]=(r*O-i*A+o*E)*T,t[6]=(y*M-v*S-g*b)*T,t[7]=(s*S-h*M+d*b)*T,t[8]=(u*I-a*A+f*_)*T,t[9]=(e*A-r*I-o*_)*T,t[10]=(v*x-p*M+g*m)*T,t[11]=(l*M-s*x-d*m)*T,t[12]=(a*E-u*P-c*_)*T,t[13]=(r*P-e*E+i*_)*T,t[14]=(p*b-v*w-y*m)*T,t[15]=(s*w-l*b+h*m)*T,t},n.adjoint=function(t,n){let r=n[0],e=n[1],i=n[2],o=n[3],u=n[4],a=n[5],c=n[6],f=n[7],s=n[8],l=n[9],h=n[10],d=n[11],v=n[12],p=n[13],y=n[14],g=n[15];return t[0]=a*(h*g-d*y)-l*(c*g-f*y)+p*(c*d-f*h),t[1]=-(e*(h*g-d*y)-l*(i*g-o*y)+p*(i*d-o*h)),t[2]=e*(c*g-f*y)-a*(i*g-o*y)+p*(i*f-o*c),t[3]=-(e*(c*d-f*h)-a*(i*d-o*h)+l*(i*f-o*c)),t[4]=-(u*(h*g-d*y)-s*(c*g-f*y)+v*(c*d-f*h)),t[5]=r*(h*g-d*y)-s*(i*g-o*y)+v*(i*d-o*h),t[6]=-(r*(c*g-f*y)-u*(i*g-o*y)+v*(i*f-o*c)),t[7]=r*(c*d-f*h)-u*(i*d-o*h)+s*(i*f-o*c),t[8]=u*(l*g-d*p)-s*(a*g-f*p)+v*(a*d-f*l),t[9]=-(r*(l*g-d*p)-s*(e*g-o*p)+v*(e*d-o*l)),t[10]=r*(a*g-f*p)-u*(e*g-o*p)+v*(e*f-o*a),t[11]=-(r*(a*d-f*l)-u*(e*d-o*l)+s*(e*f-o*a)),t[12]=-(u*(l*y-h*p)-s*(a*y-c*p)+v*(a*h-c*l)),t[13]=r*(l*y-h*p)-s*(e*y-i*p)+v*(e*h-i*l),t[14]=-(r*(a*y-c*p)-u*(e*y-i*p)+v*(e*c-i*a)),t[15]=r*(a*h-c*l)-u*(e*h-i*l)+s*(e*c-i*a),t},n.determinant=function(t){let n=t[0],r=t[1],e=t[2],i=t[3],o=t[4],u=t[5],a=t[6],c=t[7],f=t[8],s=t[9],l=t[10],h=t[11],d=t[12],v=t[13],p=t[14],y=t[15];return(n*u-r*o)*(l*y-h*p)-(n*a-e*o)*(s*y-h*v)+(n*c-i*o)*(s*p-l*v)+(r*a-e*u)*(f*y-h*d)-(r*c-i*u)*(f*p-l*d)+(e*c-i*a)*(f*v-s*d)},n.multiply=i,n.translate=function(t,n,r){let e,i,o,u,a,c,f,s,l,h,d,v,p=r[0],y=r[1],g=r[2];n===t?(t[12]=n[0]*p+n[4]*y+n[8]*g+n[12],t[13]=n[1]*p+n[5]*y+n[9]*g+n[13],t[14]=n[2]*p+n[6]*y+n[10]*g+n[14],t[15]=n[3]*p+n[7]*y+n[11]*g+n[15]):(e=n[0],i=n[1],o=n[2],u=n[3],a=n[4],c=n[5],f=n[6],s=n[7],l=n[8],h=n[9],d=n[10],v=n[11],t[0]=e,t[1]=i,t[2]=o,t[3]=u,t[4]=a,t[5]=c,t[6]=f,t[7]=s,t[8]=l,t[9]=h,t[10]=d,t[11]=v,t[12]=e*p+a*y+l*g+n[12],t[13]=i*p+c*y+h*g+n[13],t[14]=o*p+f*y+d*g+n[14],t[15]=u*p+s*y+v*g+n[15]);return t},n.scale=function(t,n,r){let e=r[0],i=r[1],o=r[2];return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=n[7]*i,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},n.rotate=function(t,n,r,i){let o,u,a,c,f,s,l,h,d,v,p,y,g,m,b,M,w,x,S,_,E,A,P,I,O=i[0],T=i[1],L=i[2],R=Math.sqrt(O*O+T*T+L*L);if(Math.abs(R)<e.EPSILON)return null;O*=R=1/R,T*=R,L*=R,o=Math.sin(r),u=Math.cos(r),a=1-u,c=n[0],f=n[1],s=n[2],l=n[3],h=n[4],d=n[5],v=n[6],p=n[7],y=n[8],g=n[9],m=n[10],b=n[11],M=O*O*a+u,w=T*O*a+L*o,x=L*O*a-T*o,S=O*T*a-L*o,_=T*T*a+u,E=L*T*a+O*o,A=O*L*a+T*o,P=T*L*a-O*o,I=L*L*a+u,t[0]=c*M+h*w+y*x,t[1]=f*M+d*w+g*x,t[2]=s*M+v*w+m*x,t[3]=l*M+p*w+b*x,t[4]=c*S+h*_+y*E,t[5]=f*S+d*_+g*E,t[6]=s*S+v*_+m*E,t[7]=l*S+p*_+b*E,t[8]=c*A+h*P+y*I,t[9]=f*A+d*P+g*I,t[10]=s*A+v*P+m*I,t[11]=l*A+p*P+b*I,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);return t},n.rotateX=function(t,n,r){let e=Math.sin(r),i=Math.cos(r),o=n[4],u=n[5],a=n[6],c=n[7],f=n[8],s=n[9],l=n[10],h=n[11];n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);return t[4]=o*i+f*e,t[5]=u*i+s*e,t[6]=a*i+l*e,t[7]=c*i+h*e,t[8]=f*i-o*e,t[9]=s*i-u*e,t[10]=l*i-a*e,t[11]=h*i-c*e,t},n.rotateY=function(t,n,r){let e=Math.sin(r),i=Math.cos(r),o=n[0],u=n[1],a=n[2],c=n[3],f=n[8],s=n[9],l=n[10],h=n[11];n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);return t[0]=o*i-f*e,t[1]=u*i-s*e,t[2]=a*i-l*e,t[3]=c*i-h*e,t[8]=o*e+f*i,t[9]=u*e+s*i,t[10]=a*e+l*i,t[11]=c*e+h*i,t},n.rotateZ=function(t,n,r){let e=Math.sin(r),i=Math.cos(r),o=n[0],u=n[1],a=n[2],c=n[3],f=n[4],s=n[5],l=n[6],h=n[7];n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);return t[0]=o*i+f*e,t[1]=u*i+s*e,t[2]=a*i+l*e,t[3]=c*i+h*e,t[4]=f*i-o*e,t[5]=s*i-u*e,t[6]=l*i-a*e,t[7]=h*i-c*e,t},n.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotation=function(t,n,r){let i,o,u,a=r[0],c=r[1],f=r[2],s=Math.sqrt(a*a+c*c+f*f);if(Math.abs(s)<e.EPSILON)return null;return a*=s=1/s,c*=s,f*=s,i=Math.sin(n),o=Math.cos(n),u=1-o,t[0]=a*a*u+o,t[1]=c*a*u+f*i,t[2]=f*a*u-c*i,t[3]=0,t[4]=a*c*u-f*i,t[5]=c*c*u+o,t[6]=f*c*u+a*i,t[7]=0,t[8]=a*f*u+c*i,t[9]=c*f*u-a*i,t[10]=f*f*u+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromXRotation=function(t,n){let r=Math.sin(n),e=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromYRotation=function(t,n){let r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromZRotation=function(t,n){let r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotationTranslation=function(t,n,r){let e=n[0],i=n[1],o=n[2],u=n[3],a=e+e,c=i+i,f=o+o,s=e*a,l=e*c,h=e*f,d=i*c,v=i*f,p=o*f,y=u*a,g=u*c,m=u*f;return t[0]=1-(d+p),t[1]=l+m,t[2]=h-g,t[3]=0,t[4]=l-m,t[5]=1-(s+p),t[6]=v+y,t[7]=0,t[8]=h+g,t[9]=v-y,t[10]=1-(s+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},n.getTranslation=function(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t},n.getScaling=function(t,n){let r=n[0],e=n[1],i=n[2],o=n[4],u=n[5],a=n[6],c=n[8],f=n[9],s=n[10];return t[0]=Math.sqrt(r*r+e*e+i*i),t[1]=Math.sqrt(o*o+u*u+a*a),t[2]=Math.sqrt(c*c+f*f+s*s),t},n.getRotation=function(t,n){let r=n[0]+n[5]+n[10],e=0;r>0?(e=2*Math.sqrt(r+1),t[3]=.25*e,t[0]=(n[6]-n[9])/e,t[1]=(n[8]-n[2])/e,t[2]=(n[1]-n[4])/e):n[0]>n[5]&n[0]>n[10]?(e=2*Math.sqrt(1+n[0]-n[5]-n[10]),t[3]=(n[6]-n[9])/e,t[0]=.25*e,t[1]=(n[1]+n[4])/e,t[2]=(n[8]+n[2])/e):n[5]>n[10]?(e=2*Math.sqrt(1+n[5]-n[0]-n[10]),t[3]=(n[8]-n[2])/e,t[0]=(n[1]+n[4])/e,t[1]=.25*e,t[2]=(n[6]+n[9])/e):(e=2*Math.sqrt(1+n[10]-n[0]-n[5]),t[3]=(n[1]-n[4])/e,t[0]=(n[8]+n[2])/e,t[1]=(n[6]+n[9])/e,t[2]=.25*e);return t},n.fromRotationTranslationScale=function(t,n,r,e){let i=n[0],o=n[1],u=n[2],a=n[3],c=i+i,f=o+o,s=u+u,l=i*c,h=i*f,d=i*s,v=o*f,p=o*s,y=u*s,g=a*c,m=a*f,b=a*s,M=e[0],w=e[1],x=e[2];return t[0]=(1-(v+y))*M,t[1]=(h+b)*M,t[2]=(d-m)*M,t[3]=0,t[4]=(h-b)*w,t[5]=(1-(l+y))*w,t[6]=(p+g)*w,t[7]=0,t[8]=(d+m)*x,t[9]=(p-g)*x,t[10]=(1-(l+v))*x,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},n.fromRotationTranslationScaleOrigin=function(t,n,r,e,i){let o=n[0],u=n[1],a=n[2],c=n[3],f=o+o,s=u+u,l=a+a,h=o*f,d=o*s,v=o*l,p=u*s,y=u*l,g=a*l,m=c*f,b=c*s,M=c*l,w=e[0],x=e[1],S=e[2],_=i[0],E=i[1],A=i[2];return t[0]=(1-(p+g))*w,t[1]=(d+M)*w,t[2]=(v-b)*w,t[3]=0,t[4]=(d-M)*x,t[5]=(1-(h+g))*x,t[6]=(y+m)*x,t[7]=0,t[8]=(v+b)*S,t[9]=(y-m)*S,t[10]=(1-(h+p))*S,t[11]=0,t[12]=r[0]+_-(t[0]*_+t[4]*E+t[8]*A),t[13]=r[1]+E-(t[1]*_+t[5]*E+t[9]*A),t[14]=r[2]+A-(t[2]*_+t[6]*E+t[10]*A),t[15]=1,t},n.fromQuat=function(t,n){let r=n[0],e=n[1],i=n[2],o=n[3],u=r+r,a=e+e,c=i+i,f=r*u,s=e*u,l=e*a,h=i*u,d=i*a,v=i*c,p=o*u,y=o*a,g=o*c;return t[0]=1-l-v,t[1]=s+g,t[2]=h-y,t[3]=0,t[4]=s-g,t[5]=1-f-v,t[6]=d+p,t[7]=0,t[8]=h+y,t[9]=d-p,t[10]=1-f-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.frustum=function(t,n,r,e,i,o,u){let a=1/(r-n),c=1/(i-e),f=1/(o-u);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*c,t[6]=0,t[7]=0,t[8]=(r+n)*a,t[9]=(i+e)*c,t[10]=(u+o)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*o*2*f,t[15]=0,t},n.perspective=function(t,n,r,e,i){let o=1/Math.tan(n/2),u=1/(e-i);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+e)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*e*u,t[15]=0,t},n.perspectiveFromFieldOfView=function(t,n,r,e){let i=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),u=Math.tan(n.leftDegrees*Math.PI/180),a=Math.tan(n.rightDegrees*Math.PI/180),c=2/(u+a),f=2/(i+o);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(u-a)*c*.5,t[9]=(i-o)*f*.5,t[10]=e/(r-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*r/(r-e),t[15]=0,t},n.ortho=function(t,n,r,e,i,o,u){let a=1/(n-r),c=1/(e-i),f=1/(o-u);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(n+r)*a,t[13]=(i+e)*c,t[14]=(u+o)*f,t[15]=1,t},n.lookAt=function(t,n,r,i){let o,u,a,c,f,s,l,h,d,v,p=n[0],y=n[1],g=n[2],m=i[0],b=i[1],M=i[2],w=r[0],x=r[1],S=r[2];if(Math.abs(p-w)<e.EPSILON&&Math.abs(y-x)<e.EPSILON&&Math.abs(g-S)<e.EPSILON)return mat4.identity(t);l=p-w,h=y-x,d=g-S,v=1/Math.sqrt(l*l+h*h+d*d),o=b*(d*=v)-M*(h*=v),u=M*(l*=v)-m*d,a=m*h-b*l,(v=Math.sqrt(o*o+u*u+a*a))?(o*=v=1/v,u*=v,a*=v):(o=0,u=0,a=0);c=h*a-d*u,f=d*o-l*a,s=l*u-h*o,(v=Math.sqrt(c*c+f*f+s*s))?(c*=v=1/v,f*=v,s*=v):(c=0,f=0,s=0);return t[0]=o,t[1]=c,t[2]=l,t[3]=0,t[4]=u,t[5]=f,t[6]=h,t[7]=0,t[8]=a,t[9]=s,t[10]=d,t[11]=0,t[12]=-(o*p+u*y+a*g),t[13]=-(c*p+f*y+s*g),t[14]=-(l*p+h*y+d*g),t[15]=1,t},n.targetTo=function(t,n,r,e){let i=n[0],o=n[1],u=n[2],a=e[0],c=e[1],f=e[2],s=i-r[0],l=o-r[1],h=u-r[2],d=s*s+l*l+h*h;d>0&&(d=1/Math.sqrt(d),s*=d,l*=d,h*=d);let v=c*h-f*l,p=f*s-a*h,y=a*l-c*s;return t[0]=v,t[1]=p,t[2]=y,t[3]=0,t[4]=l*y-h*p,t[5]=h*v-s*y,t[6]=s*p-l*v,t[7]=0,t[8]=s,t[9]=l,t[10]=h,t[11]=0,t[12]=i,t[13]=o,t[14]=u,t[15]=1,t},n.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},n.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t[9]=n[9]+r[9],t[10]=n[10]+r[10],t[11]=n[11]+r[11],t[12]=n[12]+r[12],t[13]=n[13]+r[13],t[14]=n[14]+r[14],t[15]=n[15]+r[15],t},n.subtract=o,n.multiplyScalar=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=n[11]*r,t[12]=n[12]*r,t[13]=n[13]*r,t[14]=n[14]*r,t[15]=n[15]*r,t},n.multiplyScalarAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t[6]=n[6]+r[6]*e,t[7]=n[7]+r[7]*e,t[8]=n[8]+r[8]*e,t[9]=n[9]+r[9]*e,t[10]=n[10]+r[10]*e,t[11]=n[11]+r[11]*e,t[12]=n[12]+r[12]*e,t[13]=n[13]+r[13]*e,t[14]=n[14]+r[14]*e,t[15]=n[15]+r[15]*e,t},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]},n.equals=function(t,n){let r=t[0],i=t[1],o=t[2],u=t[3],a=t[4],c=t[5],f=t[6],s=t[7],l=t[8],h=t[9],d=t[10],v=t[11],p=t[12],y=t[13],g=t[14],m=t[15],b=n[0],M=n[1],w=n[2],x=n[3],S=n[4],_=n[5],E=n[6],A=n[7],P=n[8],I=n[9],O=n[10],T=n[11],L=n[12],R=n[13],k=n[14],N=n[15];return Math.abs(r-b)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-M)<=e.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(o-w)<=e.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(u-x)<=e.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(a-S)<=e.EPSILON*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(c-_)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-E)<=e.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(s-A)<=e.EPSILON*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(l-P)<=e.EPSILON*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(h-I)<=e.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(d-O)<=e.EPSILON*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(v-T)<=e.EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(p-L)<=e.EPSILON*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(y-R)<=e.EPSILON*Math.max(1,Math.abs(y),Math.abs(R))&&Math.abs(g-k)<=e.EPSILON*Math.max(1,Math.abs(g),Math.abs(k))&&Math.abs(m-N)<=e.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))};var e=r(29);function i(t,n,r){let e=n[0],i=n[1],o=n[2],u=n[3],a=n[4],c=n[5],f=n[6],s=n[7],l=n[8],h=n[9],d=n[10],v=n[11],p=n[12],y=n[13],g=n[14],m=n[15],b=r[0],M=r[1],w=r[2],x=r[3];return t[0]=b*e+M*a+w*l+x*p,t[1]=b*i+M*c+w*h+x*y,t[2]=b*o+M*f+w*d+x*g,t[3]=b*u+M*s+w*v+x*m,b=r[4],M=r[5],w=r[6],x=r[7],t[4]=b*e+M*a+w*l+x*p,t[5]=b*i+M*c+w*h+x*y,t[6]=b*o+M*f+w*d+x*g,t[7]=b*u+M*s+w*v+x*m,b=r[8],M=r[9],w=r[10],x=r[11],t[8]=b*e+M*a+w*l+x*p,t[9]=b*i+M*c+w*h+x*y,t[10]=b*o+M*f+w*d+x*g,t[11]=b*u+M*s+w*v+x*m,b=r[12],M=r[13],w=r[14],x=r[15],t[12]=b*e+M*a+w*l+x*p,t[13]=b*i+M*c+w*h+x*y,t[14]=b*o+M*f+w*d+x*g,t[15]=b*u+M*s+w*v+x*m,t}function o(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t[9]=n[9]-r[9],t[10]=n[10]-r[10],t[11]=n[11]-r[11],t[12]=n[12]-r[12],t[13]=n[13]-r[13],t[14]=n[14]-r[14],t[15]=n[15]-r[15],t}const u=i;n.mul=u;const a=o;n.sub=a},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=a,n.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},n.setAxisAngle=c,n.getAxisAngle=function(t,n){let r=2*Math.acos(n[3]),e=Math.sin(r/2);0!=e?(t[0]=n[0]/e,t[1]=n[1]/e,t[2]=n[2]/e):(t[0]=1,t[1]=0,t[2]=0);return r},n.multiply=f,n.rotateX=function(t,n,r){r*=.5;let e=n[0],i=n[1],o=n[2],u=n[3],a=Math.sin(r),c=Math.cos(r);return t[0]=e*c+u*a,t[1]=i*c+o*a,t[2]=o*c-i*a,t[3]=u*c-e*a,t},n.rotateY=function(t,n,r){r*=.5;let e=n[0],i=n[1],o=n[2],u=n[3],a=Math.sin(r),c=Math.cos(r);return t[0]=e*c-o*a,t[1]=i*c+u*a,t[2]=o*c+e*a,t[3]=u*c-i*a,t},n.rotateZ=function(t,n,r){r*=.5;let e=n[0],i=n[1],o=n[2],u=n[3],a=Math.sin(r),c=Math.cos(r);return t[0]=e*c+i*a,t[1]=i*c-e*a,t[2]=o*c+u*a,t[3]=u*c-o*a,t},n.calculateW=function(t,n){let r=n[0],e=n[1],i=n[2];return t[0]=r,t[1]=e,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-e*e-i*i)),t},n.slerp=s,n.invert=function(t,n){let r=n[0],e=n[1],i=n[2],o=n[3],u=r*r+e*e+i*i+o*o,a=u?1/u:0;return t[0]=-r*a,t[1]=-e*a,t[2]=-i*a,t[3]=o*a,t},n.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},n.fromMat3=l,n.fromEuler=function(t,n,r,e){let i=.5*Math.PI/180;n*=i,r*=i,e*=i;let o=Math.sin(n),u=Math.cos(n),a=Math.sin(r),c=Math.cos(r),f=Math.sin(e),s=Math.cos(e);return t[0]=o*c*s-u*a*f,t[1]=u*a*s+o*c*f,t[2]=u*c*f-o*a*s,t[3]=u*c*s+o*a*f,t},n.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var e=r(29),i=r(133),o=r(134),u=r(135);function a(){let t=new e.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function c(t,n,r){r*=.5;let e=Math.sin(r);return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=Math.cos(r),t}function f(t,n,r){let e=n[0],i=n[1],o=n[2],u=n[3],a=r[0],c=r[1],f=r[2],s=r[3];return t[0]=e*s+u*a+i*f-o*c,t[1]=i*s+u*c+o*a-e*f,t[2]=o*s+u*f+e*c-i*a,t[3]=u*s-e*a-i*c-o*f,t}function s(t,n,r,e){let i,o,u,a,c,f=n[0],s=n[1],l=n[2],h=n[3],d=r[0],v=r[1],p=r[2],y=r[3];return(o=f*d+s*v+l*p+h*y)<0&&(o=-o,d=-d,v=-v,p=-p,y=-y),1-o>1e-6?(i=Math.acos(o),u=Math.sin(i),a=Math.sin((1-e)*i)/u,c=Math.sin(e*i)/u):(a=1-e,c=e),t[0]=a*f+c*d,t[1]=a*s+c*v,t[2]=a*l+c*p,t[3]=a*h+c*y,t}function l(t,n){let r,e=n[0]+n[4]+n[8];if(e>0)r=Math.sqrt(e+1),t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r;else{let e=0;n[4]>n[0]&&(e=1),n[8]>n[3*e+e]&&(e=2);let i=(e+1)%3,o=(e+2)%3;r=Math.sqrt(n[3*e+e]-n[3*i+i]-n[3*o+o]+1),t[e]=.5*r,r=.5/r,t[3]=(n[3*i+o]-n[3*o+i])*r,t[i]=(n[3*i+e]+n[3*e+i])*r,t[o]=(n[3*o+e]+n[3*e+o])*r}return t}const h=u.clone;n.clone=h;const d=u.fromValues;n.fromValues=d;const v=u.copy;n.copy=v;const p=u.set;n.set=p;const y=u.add;n.add=y;const g=f;n.mul=g;const m=u.scale;n.scale=m;const b=u.dot;n.dot=b;const M=u.lerp;n.lerp=M;const w=u.length;n.length=w;const x=w;n.len=x;const S=u.squaredLength;n.squaredLength=S;const _=S;n.sqrLen=_;const E=u.normalize;n.normalize=E;const A=u.exactEquals;n.exactEquals=A;const P=u.equals;n.equals=P;const I=function(){let t=o.create(),n=o.fromValues(1,0,0),r=o.fromValues(0,1,0);return function(e,i,u){let a=o.dot(i,u);return a<-.999999?(o.cross(t,n,i),o.len(t)<1e-6&&o.cross(t,r,i),o.normalize(t,t),c(e,t,Math.PI),e):a>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(o.cross(t,i,u),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+a,E(e,e))}}();n.rotationTo=I;const O=function(){let t=a(),n=a();return function(r,e,i,o,u,a){return s(t,e,u,a),s(n,i,o,a),s(r,t,n,2*a*(1-a)),r}}();n.sqlerp=O;const T=function(){let t=i.create();return function(n,r,e,i){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],E(n,l(n,t))}}();n.setAxes=T},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=i,n.clone=function(t){let n=new e.ARRAY_TYPE(2);return n[0]=t[0],n[1]=t[1],n},n.fromValues=function(t,n){let r=new e.ARRAY_TYPE(2);return r[0]=t,r[1]=n,r},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t},n.set=function(t,n,r){return t[0]=n,t[1]=r,t},n.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t},n.subtract=o,n.multiply=u,n.divide=a,n.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t},n.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t},n.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t},n.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t},n.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t},n.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t},n.scaleAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t},n.distance=c,n.squaredDistance=f,n.length=s,n.squaredLength=l,n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t},n.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t},n.normalize=function(t,n){var r=n[0],e=n[1],i=r*r+e*e;i>0&&(i=1/Math.sqrt(i),t[0]=n[0]*i,t[1]=n[1]*i);return t},n.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]},n.cross=function(t,n,r){var e=n[0]*r[1]-n[1]*r[0];return t[0]=t[1]=0,t[2]=e,t},n.lerp=function(t,n,r,e){var i=n[0],o=n[1];return t[0]=i+e*(r[0]-i),t[1]=o+e*(r[1]-o),t},n.random=function(t,n){n=n||1;var r=2*e.RANDOM()*Math.PI;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t},n.transformMat2=function(t,n,r){var e=n[0],i=n[1];return t[0]=r[0]*e+r[2]*i,t[1]=r[1]*e+r[3]*i,t},n.transformMat2d=function(t,n,r){var e=n[0],i=n[1];return t[0]=r[0]*e+r[2]*i+r[4],t[1]=r[1]*e+r[3]*i+r[5],t},n.transformMat3=function(t,n,r){var e=n[0],i=n[1];return t[0]=r[0]*e+r[3]*i+r[6],t[1]=r[1]*e+r[4]*i+r[7],t},n.transformMat4=function(t,n,r){let e=n[0],i=n[1];return t[0]=r[0]*e+r[4]*i+r[12],t[1]=r[1]*e+r[5]*i+r[13],t},n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]},n.equals=function(t,n){let r=t[0],i=t[1],o=n[0],u=n[1];return Math.abs(r-o)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-u)<=e.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))};var e=r(29);function i(){let t=new e.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function o(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t}function u(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t}function a(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t}function c(t,n){var r=n[0]-t[0],e=n[1]-t[1];return Math.sqrt(r*r+e*e)}function f(t,n){var r=n[0]-t[0],e=n[1]-t[1];return r*r+e*e}function s(t){var n=t[0],r=t[1];return Math.sqrt(n*n+r*r)}function l(t){var n=t[0],r=t[1];return n*n+r*r}const h=s;n.len=h;const d=o;n.sub=d;const v=u;n.mul=v;const p=a;n.div=p;const y=c;n.dist=y;const g=f;n.sqrDist=g;const m=l;n.sqrLen=m;const b=function(){let t=i();return function(n,r,e,i,o,u){let a,c;for(r||(r=2),e||(e=0),c=i?Math.min(i*r+e,n.length):n.length,a=e;a<c;a+=r)t[0]=n[a],t[1]=n[a+1],o(t,t,u),n[a]=t[0],n[a+1]=t[1];return n}}();n.forEach=b},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.allKeys=function(t){var n=Object.keys(t);return Promise.all(n.map(function(n){return Promise.resolve(t[n])})).then(function(t){return t.reduce(function(t,r,e){return t[n[e]]=r,t},{})})}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e,i=r(93),o=r(48),u=r(43),a=(e=u)&&e.__esModule?e:{default:e};function c(t){if(Array.isArray(t)){for(var n=0,r=Array(t.length);n<t.length;n++)r[n]=t[n];return r}return Array.from(t)}n.default=function(t,n){var r=t.board,e=t.editor,u=t.mode,s=t.now,l=t.random,h=n.ctx,d=n.mousePos,v=function(t,n,r){return Math.floor(r/(t/n))},p=function(t,n,r){return v(t,n,r%t)},y=function(t){return t%o.TEX_SIZE.x*2+Math.floor(t/o.TEX_SIZE.y)*o.TEX_SIZE.y*4},g=function(t,n,r,e){e=(e||(r||n).add(.5)).mult(2),r=(r||n).mult(2),h.drawQuad(t,n,{size:(0,a.default)(.5),light:[A[r.y][r.x],A[e.y][r.x],A[e.y][e.x],A[r.y][e.x]]})},m=function(t,n,e,i){var o=0;[(0,a.default)(0,-1),(0,a.default)(1,0),(0,a.default)(0,1),(0,a.default)(-1,0)].forEach(function(t,e){var u=n.add(t);r.valid(u)&&!i(r.cell(u))||(o|=1<<e)});for(var u=0;u<1+e;u+=.5)for(var c=0;c<1;c+=.5){var s=f[o][4*u+2*c];if(null!==s){var l=n.add((0,a.default)(c,u)),h=l.sub((0,a.default)(0,e)),d=t+(s>=10?s+22:s);u<1?g(d,h,l):g(d,h,n.add((0,a.default)(c,1)),n.add((0,a.default)(.5+c,1)))}}},b=function(t,n){var r=n.cell.pos,e=n.dir,i=n.state,o=n.phase;h.drawQuad(171,r.sub((0,a.default)(0,.25)),{alpha:.375}),"idle"===i?h.drawQuad(t+e+16*p(500,2,s+500*(o||0)),r.sub((0,a.default)(0,.375))):"death"===i&&h.drawQuad(t+p(250,4,s-o),r.sub((0,a.default)(0,.375)))},M={player:function(t){return b(160,t)},enemy:function(t){return b(192,t)},crate:function(t){var n=t.cell.pos,r=y(69)+2*o.TEX_SIZE.x;h.z=1,g(r,n.add((0,a.default)(0,-.5)),n),g(r+1,n.add((0,a.default)(.5,-.5)),n.add((0,a.default)(.5,0))),g(r+2*o.TEX_SIZE.x,n.add((0,a.default)(0,0)),n.add((0,a.default)(0,.5))),g(r+2*o.TEX_SIZE.x+1,n.add((0,a.default)(.5,0)),n.add((0,a.default)(.5,.5))),g(r+4*o.TEX_SIZE.x,n.add((0,a.default)(0,.5)),n.add((0,a.default)(0,1)),n.add((0,a.default)(.5,1))),g(r+4*o.TEX_SIZE.x+1,n.add((0,a.default)(.5,.5)),n.add((0,a.default)(.5,1)),n.add((0,a.default)(1,1)))},light:function(t){var n=t.cell.pos;h.drawQuad(71,n.add((0,a.default)(0,-1.25)),{z:1}),h.drawQuad(87,n.add((0,a.default)(0,-.25)))},barrel:function(t){var n=t.cell.pos;return h.drawQuad(70,n.sub((0,a.default)(0,.25)))},"tech:wall":function(t){var n=t.cell.pos;return m(256,n,.5,function(t){return t.sprites.find(function(t){var n=t.type;return"tech:wall"===n})})},"dirt:wall":function(t){var n=t.cell.pos;return m(320,n,.5,function(t){return t.sprites.find(function(t){var n=t.type;return"dirt:wall"===n})})},coin:function(t){var n=t.cell.pos,r=t.phase,e=Math.sin((s/500+r)*Math.PI);h.drawQuad(169+Math.round((e+1)/2),n.sub((0,a.default)(0,.25)),{alpha:.375}),h.drawQuad(168,n.sub((0,a.default)(0,7/16+Math.round(2*e)/2*2/16)))},bomb:function(t){var n=t.cell.pos;h.drawQuad(171,n.sub((0,a.default)(0,3/16)),{alpha:.375}),h.drawQuad(172,n.sub((0,a.default)(0,.25)))},explosion:function(t){var n=t.cell.pos,r=t.created,e=s-r;if(0===r||e<800){var i=(0===r?p:v)(800,10,s-r);i<10&&h.drawQuad(224+i,n.sub((0,a.default)(0,(5+(i>1?i:0))/16)))}}},w=function(t,n){var e=n.add((0,a.default)(0,-1)),i=function(){return[A[2*n.y][2*n.x],0,0,A[2*n.y][2*n.x+2]]};if(r.valid(e)){var o=r.cell(e).tile;o.match(/:pit$/)?h.drawQuad(t+1,n,{z:-1,light:[0,0,0,0]}):o.match(/:crate$/)?h.drawQuad(t+3,n,{z:-1,light:i()}):h.drawQuad(t,n,{z:-1,light:i()})}else h.drawQuad(t+1,n,{z:-1,light:[0,0,0,0]})},x=function(t,n){h.drawQuad(32+p(200,4,s),t,{transforms:Array(n).fill("rotate")}),m(136,t,0,function(t){return t.tile.match(/^belt:/)})},S={"tech:floor":0,"tech:pit":function(t){return w(4,t)},"tech:crate":6,"dirt:floor":16,"dirt:pit":function(t){return w(20,t)},"dirt:crate":22,"belt:up":function(t){return x(t,0)},"belt:right":function(t){return x(t,1)},"belt:down":function(t){return x(t,2)},"belt:left":function(t){return x(t,3)}},_=function(t,n){var r=S[t];if("number"==typeof r){var e=y(r);g(e,n),g(e+1,n.add((0,a.default)(.5,0))),g(e+2*o.TEX_SIZE.x,n.add((0,a.default)(0,.5))),g(e+2*o.TEX_SIZE.x+1,n.add((0,a.default)(.5,.5)))}else r(n)},E=Math,A=[].concat(c(Array(2*r.height+1))).map(function(){return Array(2*r.width+1).fill(.3)});r.recomputeFOV(function(t){return t&&!t.sprites.some(function(t){var n=t.type;return["tech:wall","dirt:wall","crate"].includes(n)})});var P=function(t,n){return function(e){var i=n(e),o=new Map,u=e.cell.pos.add(.5),c=u.x,f=u.y;r.fov.compute(2*c,2*f,2*t,function(t,n){return o.set((0,a.default)(t,n).toString(),!0)});for(var s=E.max(0,-t+f);s<=E.min(r.height,t+f);s+=.5)for(var l=E.sin(E.acos(E.abs(s-f)/t))*t,h=E.max(0,E.floor(2*-l)/2+c);h<=E.min(r.width,E.ceil(2*l)/2+c);h+=.5){var d=(0,a.default)(h,s);if(o.get(d.mult(2).toString())){var v=.5/t*(t+.5-d.sub((0,a.default)(c,f)).length())*i;A[2*d.y][2*d.x]=E.max(.3,E.min(A[2*d.y][2*d.x]+v,2))}}}};if(r.sprites.get("explosion").forEach(P(2,function(t){var n=v(800,10,s-t.created);return Math.max(0,1-n/10)})),r.sprites.get("tech:wall").forEach(P(1,function(){return.2})),r.sprites.get("light").forEach(P(5,function(t){return t.flicker&&t.flicker<s&&t.flickerEnd>s?1.25:((!t.flicker||t.flickerEnd<s)&&(t.flicker=s+1e3*(l()+.5),t.flickerEnd=t.flicker+1e3*(.1*l()+.1)),1.4)})),r.player()){var I=[].concat(c(Array(2*r.height+1))).map(function(){return Array(2*r.width+1).fill(!1)}),O=r.player().cell.pos.mult(2).add(1);r.fov.compute(O.x,O.y,1/0,function(t,n){return I[n][t]=!0});for(var T=0;T<=2*r.height;T+=1)for(var L=0;L<=2*r.width;L+=1)I[T][L]||(A[T][L]=0)}var R=(0,i.worldCoord)(r,h.canvas,d,(0,a.default)(0,.5));[].concat(c(Array(r.height))).forEach(function(t,n){return[].concat(c(Array(r.width))).forEach(function(t,o){var c=r.cell((0,a.default)(o,n));if(h.z=0,h.alpha=1,_(c.tile,c.pos),"edit"===u&&"bg"===e.mode&&c.pos.equals(R)&&(_(e.tile(),R),h.alpha=1,h.z=2,h.drawQuad(142,R.add((0,a.default)(-1/16)),{light:[1,1,1,1]}),h.drawQuad(143,R.add((0,a.default)(.9375,-1/16)),{light:[1,1,1,1]}),h.drawQuad(158,R.add((0,a.default)(-1/16,.9375)),{light:[1,1,1,1]}),h.drawQuad(159,R.add((0,a.default)(.9375,.9375)),{light:[1,1,1,1]})),h.z=1,h.light=Array(4).fill(A[2*n][2*o]),"edit"===u&&"bg"===e.mode&&(h.alpha=.4),c.sprites.forEach(function(t){return M[t.type](t)}),h.light=[1,1,1,1],"edit"===u&&"fg"===e.mode&&c.pos.equals(R)){h.alpha=.5;var f={cell:r.cell(R),type:e.sprite()};(0,i.setupSprite)({random:function(){return 0},now:0},f),M[f.type](f),h.alpha=1}})})};var f=Object.freeze([[0,4,8,12,16,18],[1,5,8,12,16,18],[0,6,8,13,16,19],[1,7,8,13,16,19],[0,4,9,14,null,null],[1,5,9,14,null,null],[0,6,9,15,null,null],[1,7,9,15,null,null],[2,4,10,12,17,18],[3,5,10,12,17,18],[2,6,10,13,17,19],[3,7,10,13,17,19],[2,4,11,14,null,null],[3,5,11,14,null,null],[2,6,11,15,null,null],[3,7,11,15,null,null]])}]);